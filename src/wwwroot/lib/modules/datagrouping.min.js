!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/datagrouping",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function e(t,e,a,o){t.hasOwnProperty(e)||(t[e]=o.apply(null,a))}e(t=t?t._modules:{},"parts/DataGrouping.js",[t["parts/Globals.js"],t["parts/Utilities.js"]],function(t,e){var a=e.arrayMax,o=e.arrayMin,b=e.defined,h=e.extend,A=e.isNumber,c=e.pick;e=t.addEvent;function i(t,e,a,o){var i=this,r=i.data,n=i.options&&i.options.data,s=[],p=[],u=[],l=t.length,h=!!e,d=[],g=i.pointArrayMap,c=g&&g.length,f=["x"].concat(g||["y"]),m=0,y=0;o="function"==typeof o?o:P[o]?P[o]:P[i.getDGApproximation&&i.getDGApproximation()||"average"],c?g.forEach(function(){d.push([])}):d.push([]);for(var D=c||1,G=0;G<=l&&!(t[G]>=a[0]);G++);for(;G<=l;G++){for(;void 0!==a[m+1]&&t[G]>=a[m+1]||G===l;){var v=a[m];i.dataGroupInfo={start:i.cropStart+y,length:d[0].length};var x=o.apply(i,d);for(i.pointClass&&!b(i.dataGroupInfo.options)&&(i.dataGroupInfo.options=S(i.pointClass.prototype.optionsToObject.call({series:i},i.options.data[i.cropStart+y])),f.forEach(function(t){delete i.dataGroupInfo.options[t]})),void 0!==x&&(s.push(v),p.push(x),u.push(i.dataGroupInfo)),y=G,v=0;v<D;v++)d[v].length=0,d[v].hasNulls=!1;if(m+=1,G===l)break}if(G===l)break;if(g)for(v=i.cropStart+G,x=r&&r[v]||i.pointClass.prototype.applyOptions.apply({series:i},[n[v]]),v=0;v<c;v++){var M=x[g[v]];A(M)?d[v].push(M):null===M&&(d[v].hasNulls=!0)}else v=h?e[G]:null,A(v)?d[0].push(v):null===v&&(d[0].hasNulls=!0)}return{groupedXData:s,groupedYData:p,groupMap:u}}var r=t.Axis,n=t.correctFloat,s=t.defaultPlotOptions,d=t.format,S=t.merge,p=t.Point,u=t.Series,l=t.Tooltip,P=t.approximations={sum:function(t){var e=t.length;if(!e&&t.hasNulls)var a=null;else if(e)for(a=0;e--;)a+=t[e];return a},average:function(t){var e=t.length;return t=P.sum(t),A(t)&&e&&(t=n(t/e)),t},averages:function(){var e=[];return[].forEach.call(arguments,function(t){e.push(P.average(t))}),void 0===e[0]?void 0:e},open:function(t){return t.length?t[0]:t.hasNulls?null:void 0},high:function(t){return t.length?a(t):t.hasNulls?null:void 0},low:function(t){return t.length?o(t):t.hasNulls?null:void 0},close:function(t){return t.length?t[t.length-1]:t.hasNulls?null:void 0},ohlc:function(t,e,a,o){if(t=P.open(t),e=P.high(e),a=P.low(a),o=P.close(o),A(t)||A(e)||A(a)||A(o))return[t,e,a,o]},range:function(t,e){return t=P.low(t),e=P.high(e),A(t)||A(e)?[t,e]:null===t&&null===e?null:void 0}},g={approximations:P,groupData:i},f=u.prototype,m=f.processData,y=f.generatePoints,D={groupPixelWidth:2,dateTimeLabelFormats:{millisecond:["%A, %b %e, %H:%M:%S.%L","%A, %b %e, %H:%M:%S.%L","-%H:%M:%S.%L"],second:["%A, %b %e, %H:%M:%S","%A, %b %e, %H:%M:%S","-%H:%M:%S"],minute:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],hour:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],day:["%A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],week:["Week from %A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],month:["%B %Y","%B","-%B %Y"],year:["%Y","%Y","-%Y"]}},G={line:{},spline:{},area:{},areaspline:{},arearange:{},column:{groupPixelWidth:10},columnrange:{groupPixelWidth:10},candlestick:{groupPixelWidth:10},ohlc:{groupPixelWidth:5}},v=t.defaultDataGroupingUnits=[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1]],["week",[1]],["month",[1,3,6]],["year",null]];return f.getDGApproximation=function(){return t.seriesTypes.arearange&&this instanceof t.seriesTypes.arearange?"range":t.seriesTypes.ohlc&&this instanceof t.seriesTypes.ohlc?"ohlc":t.seriesTypes.column&&this instanceof t.seriesTypes.column?"sum":"average"},f.groupData=i,f.processData=function(){var t,e=this.chart,a=this.options.dataGrouping,o=!1!==this.allowDG&&a&&c(a.enabled,e.options.isStock),i=this.visible||!e.options.chart.ignoreHiddenSeries,r=this.currentDataGrouping,n=!1;if(this.forceCrop=o,this.groupPixelWidth=null,this.hasProcessed=!0,o&&!this.requireSorting&&(this.requireSorting=n=!0),o=!1===m.apply(this,arguments)||!o,n&&(this.requireSorting=!1),!o){this.destroyGroupedData(),o=a.groupAll?this.xData:this.processedXData;var s=a.groupAll?this.yData:this.processedYData,p=e.plotSizeX,u=(e=this.xAxis).options.ordinal;if(h=this.groupPixelWidth=e.getGroupPixelWidth&&e.getGroupPixelWidth()){this.isDirty=t=!0,this.points=null;var l=(n=e.getExtremes()).min,h=h*((n=n.max)-l)/p*(u=u&&e.getGroupIntervalFactor(l,n,this)||1),p=e.getTimeTicks(e.normalizeTimeTickInterval(h,a.units||v),Math.min(l,o[0]),Math.max(n,o[o.length-1]),e.options.startOfWeek,o,this.closestPointRange),o=(s=f.groupData.apply(this,[o,s,p,a.approximation])).groupedXData;u=s.groupedYData;var d=0;if(a.smoothed&&o.length){var g=o.length-1;for(o[g]=Math.min(o[g],n);g--&&0<g;)o[g]+=h/2;o[0]=Math.max(o[0],l)}for(g=1;g<p.length;g++)p.info.segmentStarts&&-1!==p.info.segmentStarts.indexOf(g)||(d=Math.max(p[g]-p[g-1],d));(l=p.info).gapSize=d,this.closestPointRange=p.info.totalRange,this.groupMap=s.groupMap,b(o[0])&&o[0]<e.min&&i&&((!b(e.options.min)&&e.min<=e.dataMin||e.min===e.dataMin)&&(e.min=Math.min(o[0],e.min)),e.dataMin=o[0]),a.groupAll&&(o=(a=this.cropData(o,u,e.min,e.max,1)).xData,u=a.yData),this.processedXData=o,this.processedYData=u}else this.groupMap=null;this.hasGroupedData=t,this.currentDataGrouping=l,this.preventGraphAnimation=(r&&r.totalRange)!==(l&&l.totalRange)}},f.destroyGroupedData=function(){this.groupedData&&(this.groupedData.forEach(function(t,e){t&&(this.groupedData[e]=t.destroy?t.destroy():null)},this),this.groupedData.length=0)},f.generatePoints=function(){y.apply(this),this.destroyGroupedData(),this.groupedData=this.hasGroupedData?this.points:null},e(p,"update",function(){if(this.dataGroup)return t.error(24,!1,this.series.chart),!1}),e(l,"headerFormatter",function(t){var e,a,o=this.chart.time,i=t.labelConfig,r=i.series,n=r.tooltipOptions,s=r.options.dataGrouping,p=n.xDateFormat,u=r.xAxis,l=n[(t.isFooter?"footer":"header")+"Format"];u&&"datetime"===u.options.type&&s&&A(i.key)&&(e=r.currentDataGrouping,s=s.dateTimeLabelFormats||D.dateTimeLabelFormats,e?(n=s[e.unitName],1===e.count?p=n[0]:(p=n[1],a=n[2])):!p&&s&&(p=this.getXDateFormat(i,n,u)),p=o.dateFormat(p,i.key),a&&(p+=o.dateFormat(a,i.key+e.totalRange-1)),r.chart.styledMode&&(l=this.styledModeFormat(l)),t.text=d(l,{point:h(i.point,{key:p}),series:r},o),t.preventDefault())}),e(u,"destroy",f.destroyGroupedData),e(u,"afterSetOptions",function(t){t=t.options;var e=this.type,a=this.chart.options.plotOptions,o=s[e].dataGrouping,i=this.useCommonDataGrouping&&D;(G[e]||i)&&(o=o||S(D,G[e]),t.dataGrouping=S(i,o,a.series&&a.series.dataGrouping,a[e].dataGrouping,this.userOptions.dataGrouping))}),e(r,"afterSetScale",function(){this.series.forEach(function(t){t.hasProcessed=!1})}),r.prototype.getGroupPixelWidth=function(){for(var t,e=this.series,a=e.length,o=0,i=!1,r=a;r--;)(t=e[r].options.dataGrouping)&&(o=Math.max(o,c(t.groupPixelWidth,D.groupPixelWidth)));for(r=a;r--;)(t=e[r].options.dataGrouping)&&e[r].hasProcessed&&(a=(e[r].processedXData||e[r].data).length,e[r].groupPixelWidth||a>this.chart.plotSizeX/o||a&&t.forced)&&(i=!0);return i?o:0},r.prototype.setDataGrouping=function(e,t){var a;if(t=c(t,!0),e=e||{forced:!1,units:null},this instanceof r)for(a=this.series.length;a--;)this.series[a].update({dataGrouping:e},!1);else this.chart.options.series.forEach(function(t){t.dataGrouping=e},!1);this.ordinalSlope=null,t&&this.chart.redraw()},t.dataGrouping=g}),e(t,"masters/modules/datagrouping.src.js",[t["parts/DataGrouping.js"]],function(t){return t})});