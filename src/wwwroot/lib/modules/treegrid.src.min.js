"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/treegrid",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){var e=t?t._modules:{};function i(t,e,i,n){t.hasOwnProperty(e)||(t[e]=n.apply(null,i))}i(e,"parts-gantt/GridAxis.js",[e["parts/Globals.js"],e["parts/Utilities.js"]],function(p,e){function E(t){return e.isObject(t,!0)}var o=e.defined,m=e.erase,T=e.isArray,I=e.isNumber,k=e.pick,i=p.addEvent,n=p.dateFormat,g=p.merge,v=p.wrap,t=p.Chart,x=p.Axis,s=p.Tick,L={top:0,right:1,bottom:2,left:3,0:"top",1:"right",2:"bottom",3:"left"};x.prototype.isOuterAxis=function(){var i=this,t=i.chart,e=i.columnIndex,n=i.linkedParent&&i.linkedParent.columns||i.columns,o=e?i.linkedParent:i,s=-1,r=0;return t[i.coll].forEach(function(t,e){t.side!==i.side||t.options.isInternal||(r=e,t===o&&(s=e))}),r===s&&(!I(e)||n.length===e)},x.prototype.getMaxLabelDimensions=function(s,t){var r={width:0,height:0};return t.forEach(function(t){var e,i=s[t],n=0,o=0;E(i)&&(n=(e=E(i.label)?i.label:{}).getBBox?e.getBBox().height:0,e.textStr&&!I(e.textPxLength)&&(e.textPxLength=e.getBBox().width),o=I(e.textPxLength)?Math.round(e.textPxLength):0,r.height=Math.max(n,r.height),r.width=Math.max(o,r.width))}),r},p.dateFormats.W=function(t){var e,i=new Date(t);return i.setHours(0,0,0,0),i.setDate(i.getDate()-(i.getDay()||7)),e=new Date(i.getFullYear(),0,1),Math.ceil(((i-e)/864e5+1)/7)},p.dateFormats.E=function(t){return n("%a",t,!0).charAt(0)},i(s,"afterGetLabelPosition",function(t){var e,i,n,o,s,r,a,l=this.label,d=this.axis,c=d.reversed,h=d.chart,f=d.options,u=f&&E(f.grid)?f.grid:{},p=d.options.labels,m=p.align,g=L[d.side],v=t.tickmarkOffset,x=d.tickPositions,k=this.pos-v,b=I(x[t.index+1])?x[t.index+1]-v:d.max+v,y=d.tickSize("tick",!0),P=T(y)?y[0]:0,O=y&&y[1]/2;!0===u.enabled&&("top"===g?s=(o=d.top+d.offset)-P:"bottom"===g?o=(s=h.chartHeight-d.bottom+d.offset)+P:(o=d.top+d.len-d.translate(c?b:k),s=d.top+d.len-d.translate(c?k:b)),"right"===g?a=(r=h.chartWidth-d.right+d.offset)+P:"left"===g?r=(a=d.left+d.offset)-P:(r=Math.round(d.left+d.translate(c?b:k))-O,a=Math.round(d.left+d.translate(c?k:b))-O),this.slotWidth=a-r,t.pos.x="left"===m?r:"right"===m?a:r+(a-r)/2,t.pos.y=s+(o-s)/2,i=h.renderer.fontMetrics(p.style.fontSize,l.element),e=l.getBBox().height,p.useHTML?t.pos.y+=i.b+-e/2:(n=Math.round(e/i.h),t.pos.y+=(i.b-(i.h-i.f))/2+-((n-1)*i.h)/2),t.pos.x+=d.horiz&&p.x||0)}),i(x,"afterTickSize",function(t){var e,i=this.maxLabelDimensions,n=this.options;!0===(n&&E(n.grid)?n.grid:{}).enabled&&(e=2*Math.abs(this.defaultLeftAxisOptions.labels.x)+(this.horiz?i.height:i.width),T(t.tickSize)?t.tickSize[0]=e:t.tickSize=[e])}),i(x,"afterGetTitlePosition",function(t){var e,i,n,o,s,r,a,l,d,c,h,f,u,p,m,g,v=this,x=v.options;!0===(x&&E(x.grid)?x.grid:{}).enabled&&(i=(e=v.axisTitle)&&e.getBBox().width,n=v.horiz,o=v.left,s=v.top,r=v.width,a=v.height,l=x.title,d=v.opposite,c=v.offset,h=v.tickSize()||[0],f=l.x||0,u=l.y||0,p=k(l.margin,n?5:10),m=v.chart.renderer.fontMetrics(l.style&&l.style.fontSize,e).f,g=(n?s+a:o)+(n?1:-1)*(d?-1:1)*(h[0]/2)+(v.side===L.bottom?m:0),t.titlePosition.x=n?o-i/2-p+f:g+(d?r:0)+c+f,t.titlePosition.y=n?g-(d?a:0)+(d?m:-m)/2+c+u:s-p+u)}),v(x.prototype,"unsquish",function(t){var e,i=this.options;return!0===(i&&E(i.grid)?i.grid:{}).enabled&&this.categories?this.tickInterval:t.apply(this,(e=arguments,Array.prototype.slice.call(e,1)))}),i(x,"afterSetOptions",function(t){var d,e=this.options,i=t.userOptions,n=e&&E(e.grid)?e.grid:{};!0===n.enabled&&(d=g(!0,{className:"highcharts-grid-axis "+(i.className||""),dateTimeLabelFormats:{hour:{list:["%H:%M","%H"]},day:{list:["%A, %e. %B","%a, %e. %b","%E"]},week:{list:["Week %W","W%W"]},month:{list:["%B","%b","%o"]}},grid:{borderWidth:1},labels:{padding:2,style:{fontSize:"13px"}},margin:0,title:{text:null,reserveSpace:!1,rotation:0},units:[["millisecond",[1,10,100]],["second",[1,10]],["minute",[1,5,15]],["hour",[1,6]],["day",[1]],["week",[1]],["month",[1]],["year",null]]},i),"xAxis"===this.coll&&(o(i.linkedTo)&&!o(i.tickPixelInterval)&&(d.tickPixelInterval=350),o(i.tickPixelInterval)||!o(i.linkedTo)||o(i.tickPositioner)||o(i.tickInterval)||(d.tickPositioner=function(t,e){var i=this.linkedParent&&this.linkedParent.tickPositions&&this.linkedParent.tickPositions.info;if(i){for(var n,o,s,r,a=d.units,l=0;l<a.length;l++)if(a[l][0]===i.unitName){n=l;break}if(!a[n][1])return;return a[n+1]&&(s=a[n+1][0],o=(a[n+1][1]||[1])[0]),r=p.timeUnits[s],this.tickInterval=r*o,this.getTimeTicks({unitRange:r,count:o,unitName:s},t,e,this.options.startOfWeek)}})),g(!0,this.options,d),this.horiz&&(e.minPadding=k(i.minPadding,0),e.maxPadding=k(i.maxPadding,0)),I(e.grid.borderWidth)&&(e.tickWidth=e.lineWidth=n.borderWidth))}),i(x,"afterSetAxisTranslation",function(){var t=this.options,e=t&&E(t.grid)?t.grid:{},i=this.tickPositions&&this.tickPositions.info,n=this.userOptions.labels||{};this.horiz&&(!0===e.enabled&&this.series.forEach(function(t){t.options.pointRange=0}),i&&(!1===t.dateTimeLabelFormats[i.unitName].range||1<i.count)&&!o(n.align)&&(t.labels.align="left",o(n.x)||(t.labels.x=3)))}),i(x,"trimTicks",function(){var t=this,e=t.options,i=e&&E(e.grid)?e.grid:{},n=t.categories,o=t.tickPositions,s=o[0],r=o[o.length-1],a=t.linkedParent&&t.linkedParent.min,l=t.linkedParent&&t.linkedParent.max,d=a||t.min,c=l||t.max,h=t.tickInterval,f=s<d&&d<s+h,u=c<r&&r-h<c;!0!==i.enabled||n||!t.horiz&&!t.isLinked||(f&&!e.startOnTick&&(o[0]=d),u&&!e.endOnTick&&(o[o.length-1]=c))}),i(x,"afterRender",function(){var t,e,i,n,o,s,r,a=this,l=a.options,d=l&&E(l.grid)?l.grid:{},c=a.chart.renderer;!0===d.enabled&&(a.maxLabelDimensions=a.getMaxLabelDimensions(a.ticks,a.tickPositions),a.rightWall&&a.rightWall.destroy(),a.isOuterAxis()&&a.axisLine&&((t=l.lineWidth)&&(i=(e=a.getLinePath(t)).indexOf("M")+1,n=e.indexOf("L")+1,o=e.indexOf("M")+2,s=e.indexOf("L")+2,r=(a.tickSize("tick")[0]-1)*(a.side===L.top||a.side===L.left?-1:1),a.horiz?(e[o]=e[o]+r,e[s]=e[s]+r):(e[i]=e[i]+r,e[n]=e[n]+r),a.axisLineExtra?a.axisLineExtra.animate({d:e}):(a.axisLineExtra=c.path(e).attr({zIndex:7}).addClass("highcharts-axis-line").add(a.axisGroup),c.styledMode||a.axisLineExtra.attr({stroke:l.lineColor,"stroke-width":t})),a.axisLine[a.showAxis?"show":"hide"](!0))),(a.columns||[]).forEach(function(t){t.render()}))});var r={afterGetOffset:function(){(this.columns||[]).forEach(function(t){t.getOffset()})},afterInit:function(){var t,e,i,n,o,s=this,r=s.chart,a=s.userOptions,l=s.options,d=l&&E(l.grid)?l.grid:{};if(d.enabled&&(e=(t=s).options,i=e&&E(e.grid)?e.grid:{},n=e.labels.style.fontSize,o=t.chart.renderer.fontMetrics(n),e.labels||(e.labels={}),e.labels.align=k(e.labels.align,"center"),t.categories||(e.showLastLabel=!1),t.horiz&&(e.tickLength=i.cellHeight||o.h*(25/11)),t.labelRotation=0,e.labels.rotation=0,v(s,"labelFormatter",function(t){var e=this.axis,i=e.tickPositions,n=this.value,o=(e.isLinked?e.linkedParent:e).series[0],s=n===i[0],r=n===i[i.length-1],a=o&&p.find(o.options.data,function(t){return t[e.isXAxis?"x":"y"]===n});return this.isFirst=s,this.isLast=r,this.point=a,t.call(this)})),d.columns)for(var c=s.columns=[],h=s.columnIndex=0;++h<d.columns.length;){var f=g(a,d.columns[d.columns.length-h-1],{linkedTo:0,type:"category"});delete f.grid.columns;var u=new x(s.chart,f,!0);u.isColumn=!0,u.columnIndex=h,m(r.axes,u),m(r[s.coll],u),c.push(u)}},afterSetOptions:function(t){var e=t.userOptions,i=e&&E(e.grid)?e.grid:{},n=i.columns;i.enabled&&n&&g(!0,this.options,n[n.length-1])},afterSetScale:function(){(this.columns||[]).forEach(function(t){t.setScale()})},destroy:function(e){(this.columns||[]).forEach(function(t){t.destroy(e.keepEvents)})},init:function(t){var e=t.userOptions,i=e&&E(e.grid)?e.grid:{};i.enabled&&o(i.borderColor)&&(e.tickColor=e.lineColor=i.borderColor)}};Object.keys(r).forEach(function(t){i(x,t,r[t])}),i(t,"afterSetChartSize",function(){this.axes.forEach(function(t){(t.columns||[]).forEach(function(t){t.setAxisSize(),t.setAxisTranslation()})})})}),i(e,"parts-gantt/Tree.js",[e["parts/Utilities.js"]],function(t){function p(t){return"function"==typeof t}function o(t,n){var o=t.reduce(function(t,e){var i=v(e.parent,"");return void 0===t[i]&&(t[i]=[]),t[i].push(e),t},{});return Object.keys(o).forEach(function(t,e){var i=o[t];""!==t&&-1===n.indexOf(t)&&(i.forEach(function(t){e[""].push(t)}),delete e[t])}),o}var m=t.extend,g=t.isNumber,v=t.pick,x=function(o,t,s,e,r,a){var l,d,i,c=0,h=0,n=a&&a.after,f=a&&a.before,u={data:e,depth:s-1,id:o,level:s,parent:t};return p(f)&&f(u,a),i=(r[o]||[]).map(function(t){var e=x(t.id,o,s+1,t,r,a),i=t.start,n=!0===t.milestone?i:t.end;return l=!g(l)||i<l?i:l,d=!g(d)||d<n?n:d,c=c+1+e.descendants,h=Math.max(e.height+1,h),e}),e&&(e.start=v(e.start,l),e.end=v(e.end,d)),m(u,{children:i,descendants:c,height:h}),p(n)&&n(u,a),u};return{getListOfParents:o,getNode:x,getTree:function(t,e){var i=t.map(function(t){return t.id}),n=o(t,i);return x("",null,1,null,n,e)}}}),i(e,"mixins/tree-series.js",[e["parts/Globals.js"],e["parts/Utilities.js"]],function(k,t){function f(t){return"boolean"==typeof t}var u=t.extend,l=t.isArray,d=t.isNumber,c=t.isObject,b=t.pick,h=k.merge;return{getColor:function(t,e){var i,n,o,s,r,a,l,d,c=e.index,h=e.mapOptionsToLevel,f=e.parentColor,u=e.parentColorIndex,p=e.series,m=e.colors,g=e.siblings,v=p.points,x=p.chart.options.chart;return t&&(i=v[t.i],n=h[t.level]||{},i&&n.colorByPoint&&(s=i.index%(m?m.length:x.colorCount),o=m&&m[s]),p.chart.styledMode||(r=b(i&&i.options.color,n&&n.color,o,f&&(l=f,(d=n&&n.colorVariation)&&"brightness"===d.key?k.color(l).brighten(d.to*(c/g)).get():l),p.color)),a=b(i&&i.options.colorIndex,n&&n.colorIndex,s,u,e.colorIndex)),{color:r,colorIndex:a}},getLevelOptions:function(t){var s,e,i,r,n,o,a=null;if(c(t))for(a={},r=d(t.from)?t.from:1,o=t.levels,e={},s=c(t.defaults)?t.defaults:{},l(o)&&(e=o.reduce(function(t,e){var i,n,o;return c(e)&&d(e.level)&&(o=h({},e),n=f(o.levelIsConstant)?o.levelIsConstant:s.levelIsConstant,delete o.levelIsConstant,delete o.level,i=e.level+(n?0:r-1),c(t[i])?u(t[i],o):t[i]=o),t},{})),n=d(t.to)?t.to:1,i=0;i<=n;i++)a[i]=h({},s,c(e[i])?e[i]:{});return a},setTreeValues:function n(o,s){var t,e=s.before,i=s.idRoot,r=s.mapIdToNode[i],a=!f(s.levelIsConstant)||s.levelIsConstant,l=s.points[o.i],d=l&&l.options||{},c=0,h=[];return u(o,{levelDynamic:o.level-(a?0:r.level),name:b(l&&l.name,""),visible:i===o.id||!!f(s.visible)&&s.visible}),"function"==typeof e&&(o=e(o,s)),o.children.forEach(function(t,e){var i=u({},s);u(i,{index:e,siblings:o.children.length,visible:o.visible}),t=n(t,i),h.push(t),t.visible&&(c+=t.val)}),o.visible=0<c||o.visible,t=b(d.value,c),u(o,{children:h,childrenTotal:c,isLeaf:o.visible&&!c,val:t}),o},updateRootId:function(t){var e,i;return c(t)&&(i=c(t.options)?t.options:{},e=b(t.rootNode,i.rootId,""),c(t.userOptions)&&(t.userOptions.rootId=e),t.rootNode=e),e}}}),i(e,"modules/broken-axis.src.js",[e["parts/Globals.js"],e["parts/Utilities.js"]],function(a,t){function l(e,t){return n(t,function(t){return t.from<e&&e<t.to})}var e=t.extend,o=t.isArray,u=t.pick,i=a.addEvent,n=a.find,p=a.fireEvent,m=a.Axis,s=a.Series;e(m.prototype,{isInBreak:function(t,e){var i=t.repeat||1/0,n=t.from,o=t.to-t.from,s=n<=e?(e-n)%i:i-(n-e)%i,r=t.inclusive?s<=o:s<o&&0!=s;return r},isInAnyBreak:function(t,e){var i,n,o,s=this.options.breaks,r=s&&s.length;if(r){for(;r--;)this.isInBreak(s[r],t)&&(i=!0,n=n||u(s[r].showPoints,!this.isXAxis));o=i&&e?i&&!n:i}return o}}),i(m,"afterInit",function(){"function"==typeof this.setBreaks&&this.setBreaks(this.options.breaks,!1)}),i(m,"afterSetTickPositions",function(){if(this.isBroken){for(var t=this.tickPositions,e=this.tickPositions.info,i=[],n=0;n<t.length;n++)this.isInAnyBreak(t[n])||i.push(t[n]);this.tickPositions=i,this.tickPositions.info=e}}),i(m,"afterSetOptions",function(){this.isBroken&&(this.options.ordinal=!1)}),m.prototype.setBreaks=function(t,e){var f=this,i=o(t)&&!!t.length;function n(t){for(var e,i=t,n=0;n<f.breakArray.length;n++)if((e=f.breakArray[n]).to<=t)i-=e.len;else{if(e.from>=t)break;if(f.isInBreak(e,t)){i-=t-e.from;break}}return i}f.isDirty=f.isBroken!==i,f.isBroken=i,f.options.breaks=f.userOptions.breaks=t,f.forceRedraw=!0,i||f.val2lin!==n||(delete f.val2lin,delete f.lin2val),i&&(f.userOptions.ordinal=!1,f.val2lin=n,f.lin2val=function(t){for(var e,i=t,n=0;n<f.breakArray.length&&!((e=f.breakArray[n]).from>=i);n++)(e.to<i||f.isInBreak(e,i))&&(i+=e.len);return i},f.setExtremes=function(t,e,i,n,o){if(this.isBroken){for(var s,r=this.options.breaks;s=l(t,r);)t=s.to;for(;s=l(e,r);)e=s.from;e<t&&(e=t)}m.prototype.setExtremes.call(this,t,e,i,n,o)},f.setAxisTranslation=function(t){var e,i,n,o,s,r,a,l,d,c,h;m.prototype.setAxisTranslation.call(this,t),this.unitLength=null,this.isBroken&&(e=f.options.breaks,i=[],n=[],o=0,a=f.userMin||f.min,l=f.userMax||f.max,d=u(f.pointRangePadding,0),e.forEach(function(t){r=t.repeat||1/0,f.isInBreak(t,a)&&(a+=t.to%r-a%r),f.isInBreak(t,l)&&(l-=l%r-t.from%r)}),e.forEach(function(t){for(c=t.from,r=t.repeat||1/0;a<c-r;)c-=r;for(;c<a;)c+=r;for(h=c;h<l;h+=r)i.push({value:h,move:"in"}),i.push({value:h+(t.to-t.from),move:"out",size:t.breakSize})}),i.sort(function(t,e){return t.value===e.value?("in"===t.move?0:1)-("in"===e.move?0:1):t.value-e.value}),s=0,c=a,i.forEach(function(t){1===(s+="in"===t.move?1:-1)&&"in"===t.move&&(c=t.value),0===s&&(n.push({from:c,to:t.value,len:t.value-c-(t.size||0)}),o+=t.value-c-(t.size||0))}),f.breakArray=n,f.unitLength=l-a-o+d,p(f,"afterBreaks"),f.staticScale?f.transA=f.staticScale:f.unitLength&&(f.transA*=(l-f.min+d)/f.unitLength),d&&(f.minPixelPadding=f.transA*f.minPointOffset),f.min=a,f.max=l)}),u(e,!0)&&this.chart.redraw()},i(s,"afterGeneratePoints",function(){var t,e=this.xAxis,i=this.yAxis,n=this.points,o=n.length,s=this.options.connectNulls;if(e&&i&&(e.options.breaks||i.options.breaks))for(;o--;)null===(t=n[o]).y&&!1===s||!e.isInAnyBreak(t.x,!0)&&!i.isInAnyBreak(t.y,!0)||(n.splice(o,1),this.data[o]&&this.data[o].destroyElements())}),i(s,"afterRender",function(){this.drawBreaks(this.xAxis,["x"]),this.drawBreaks(this.yAxis,u(this.pointArrayMap,["y"]))}),a.Series.prototype.drawBreaks=function(i,t){var n,o,s,r,e=this,a=e.points;i&&t.forEach(function(t){n=i.breakArray||[],o=i.isXAxis?i.min:u(e.options.threshold,i.min),a.forEach(function(e){r=u(e["stack"+t.toUpperCase()],e[t]),n.forEach(function(t){s=!1,o<t.from&&r>t.to||o>t.from&&r<t.from?s="pointBreak":(o<t.from&&r>t.from&&r<t.to||o>t.from&&r>t.to&&r<t.from)&&(s="pointInBreak"),s&&p(i,s,{point:e,brk:t})})})})},a.Series.prototype.gappedPath=function(){var t,e=this.currentDataGrouping,i=e&&e.gapSize,n=this.options.gapSize,o=this.points.slice(),s=o.length-1,r=this.yAxis;if(n&&0<s)for("value"!==this.options.gapUnit&&(n*=this.basePointRange),i&&n<i&&i>=this.basePointRange&&(n=i);s--;)o[s+1].x-o[s].x>n&&(t=(o[s].x+o[s+1].x)/2,o.splice(s+1,0,{isNull:!0,x:t}),this.options.stacking&&((r.stacks[this.stackKey][t]=new a.StackItem(r,r.options.stackLabels,!1,t,this.stack)).total=0));return this.getGraphPath(o)}}),i(e,"parts-gantt/TreeGrid.js",[e["parts/Globals.js"],e["parts/Utilities.js"],e["parts-gantt/Tree.js"],e["mixins/tree-series.js"]],function(N,e,f,t){function S(t){return Array.prototype.slice.call(t,1)}function M(t){return e.isObject(t,!0)}function i(t,e){var i,n;for(i in e)Object.hasOwnProperty.call(e,i)&&(n=e[i],g(t,i,n))}function o(t,e){var i=t.collapseStart,n=t.collapseEnd;return e<=n&&(i-=.5),{from:i,to:n,showPoints:!1}}function G(t,e){var i=t.options.breaks||[],n=o(e,t.max);return i.some(function(t){return t.from===n.from&&t.to===n.to})}function d(t,e){var i=t.options.breaks||[],n=o(e,t.max);return i.push(n),i}function a(t,e){var i=t.options.breaks||[],n=o(e,t.max);return i.reduce(function(t,e){return e.to===n.to&&e.from===n.from||t.push(e),t},[])}function c(t,e,i){function n(t,a){var l=function(t,i,e){var n=t.nodes,o=i+(-1===i?0:a-1),s=(o-i)/2,r=i+s;return n.forEach(function(t){var e=t.data;M(e)&&(e.y=i+e.seriesIndex,delete e.seriesIndex),t.pos=r}),(e[r]=t).pos=r,t.tickmarkOffset=.5+s,t.collapseStart=o+.5,t.children.forEach(function(t){l(t,o+1,e),o=t.collapseEnd-.5}),t.collapseEnd=o+.5,e};return l(t[-1],-1,{})}var a=[],o=[],l={},d={},c=-1,h="boolean"==typeof e&&e,s={after:function(t){var e=d[t.pos],i=0,n=0;e.children.forEach(function(t){n+=t.descendants+1,i=Math.max(t.height+1,i)}),e.descendants=n,e.height=i,e.collapsed&&o.push(e)},before:function(t){var e,i,n=M(t.data)?t.data:{},o=u(n.name)?n.name:"",s=l[t.parent],r=M(s)?d[s.pos]:null;h&&M(r)&&(e=p(r.children,function(t){return t.name===o}))?(i=e.pos,e.nodes.push(t)):i=c++,d[i]||(d[i]=e={depth:r?r.depth+1:0,name:o,nodes:[t],children:[],pos:i},-1!==i&&a.push(o),M(r)&&r.children.push(e)),u(t.id)&&(l[t.id]=t),!0===n.collapsed&&(e.collapsed=!0),t.pos=i}},r=f.getTree(t,s),d=n(d,i);return{categories:a,mapOfIdToNode:l,mapOfPosToGridNode:d,collapsedNodes:o,tree:r}}function s(l){l.target.axes.filter(function(t){return"treegrid"===t.options.type}).forEach(function(i){var t,e,n,o=i.options||{},s=o.labels,r=o.uniqueNames,a=0;i.mapOfPosToGridNode&&!i.series.some(function(t){return!t.hasRendered||t.isDirtyData||t.isDirty})||(e=i.series.reduce(function(e,t){return t.visible&&(t.options.data.forEach(function(t){M(t)&&(t.seriesIndex=a,e.push(t))}),!0===r&&a++),e},[]),n=c(e,r,!0===r?a:1),i.categories=n.categories,i.mapOfPosToGridNode=n.mapOfPosToGridNode,i.hasNames=!0,i.tree=n.tree,i.series.forEach(function(t){var e=t.options.data.map(function(t){return M(t)?m(t):t});t.visible&&t.setData(e,!1)}),i.mapOptionsToLevel=h({defaults:s,from:1,levels:s.levels,to:i.tree.height}),"beforeRender"===l.type&&(t=N.addEvent(i,"foundExtremes",function(){n.collapsedNodes.forEach(function(t){var e=d(i,t);i.setBreaks(e,!1)}),t()})))})}var C=e.defined,n=e.extend,z=e.isNumber,u=e.isString,j=e.pick,r=N.addEvent,p=N.find,l=N.fireEvent,h=t.getLevelOptions,m=N.merge,g=N.wrap,v=N.Axis,x=N.Tick;i(v.prototype,{init:function(t,e,i){var n="treegrid"===i.type;n&&(r(e,"beforeRender",s),r(e,"beforeRedraw",s),i=m({grid:{enabled:!0},labels:{align:"left",levels:[{level:void 0},{level:1,style:{fontWeight:"bold"}}],symbol:{type:"triangle",x:-5,y:-5,height:10,width:10,padding:5}},uniqueNames:!1},i,{reversed:!0,grid:{columns:void 0}})),t.apply(this,[e,i]),n&&(this.hasNames=!0,this.options.showLastLabel=!0)},getMaxLabelDimensions:function(t){var e,i=this.options,n=i&&i.labels,o=n&&z(n.indentation)?i.labels.indentation:0,s=t.apply(this,S(arguments));return"treegrid"===this.options.type&&this.mapOfPosToGridNode&&(e=this.mapOfPosToGridNode[-1].height,s.width+=o*(e-1)),s},generateTick:function(t,e){var i,n,o,s=this,r=M(s.mapOptionsToLevel)?s.mapOptionsToLevel:{},a="treegrid"===s.options.type,l=s.ticks,d=l[e];a?((i=r[(o=s.mapOfPosToGridNode[e]).depth])&&(n={labels:i}),d?(d.parameters.category=o.name,d.options=n,d.addLabel()):l[e]=d=new x(s,e,null,void 0,{category:o.name,tickmarkOffset:o.tickmarkOffset,options:n})):t.apply(s,S(arguments))},setTickInterval:function(t){var n,e=this,i=e.options;"treegrid"===i.type?(e.min=j(e.userMin,i.min,e.dataMin),e.max=j(e.userMax,i.max,e.dataMax),l(e,"foundExtremes"),e.setAxisTranslation(!0),e.tickmarkOffset=.5,e.tickInterval=1,e.tickPositions=this.mapOfPosToGridNode?(n=e,Object.keys(n.mapOfPosToGridNode).reduce(function(t,e){var i=+e;return n.min<=i&&n.max>=i&&!n.isInAnyBreak(i)&&t.push(i),t},[])):[]):t.apply(e,S(arguments))}}),i(x.prototype,{getLabelPosition:function(t,e,i,n,o,s,r,a,l){var d,c,h,f,u,p=this,m=j(p.options&&p.options.labels,s),g=p.pos,v=p.axis,x="treegrid"===v.options.type,k=t.apply(p,[e,i,n,o,m,r,a,l]);return x&&(d=m&&M(m.symbol)?m.symbol:{},c=m&&z(m.indentation)?m.indentation:0,u=(f=(h=v.mapOfPosToGridNode)&&h[g])&&f.depth||1,k.x+=d.width+2*d.padding+(u-1)*c),k},renderLabel:function(t){var e,i,n,o,s,r,a,l,d,c,h,f,u,p,m,g=this,v=g.pos,x=g.axis,k=g.label,b=x.mapOfPosToGridNode,y=x.options,P=j(g.options&&g.options.labels,y&&y.labels),O=P&&M(P.symbol)?P.symbol:{},E=b&&b[v],T=E&&E.depth,I="treegrid"===y.type,L=!(!k||!k.element),A=-1<x.tickPositions.indexOf(v),B="highcharts-treegrid-node-",w=x.chart.styledMode;I&&E&&L&&k.addClass(B+"level-"+T),t.apply(g,S(arguments)),I&&E&&L&&0<E.descendants&&(e=G(x,E),o=g,s={color:!w&&k.styles.color,collapsed:e,group:k.parentGroup,options:O,renderer:k.renderer,show:A,xy:k.xy},r=o.labelIcon,a=!r,l=s.renderer,d=s.xy,c=s.options,h=c.width,f=c.height,u={x:d.x-h/2-c.padding,y:d.y-f/2},p=s.collapsed?90:180,m=s.show&&z(u.y),a&&(o.labelIcon=r=l.path(l.symbols[c.type](c.x,c.y,h,f)).addClass("highcharts-label-icon").add(s.group)),m||r.attr({y:-9999}),l.styledMode||r.attr({"stroke-width":1,fill:j(s.color,"#666666")}).css({cursor:"pointer",stroke:c.lineColor,strokeWidth:c.lineWidth}),r[a?"attr":"animate"]({translateX:u.x,translateY:u.y,rotation:p}),i=B+(e?"collapsed":"expanded"),n=B+(e?"expanded":"collapsed"),k.addClass(i).removeClass(n),w||k.css({cursor:"pointer"}),[k,g.labelIcon].forEach(function(t){t.attachedTreeGridEvents||(N.addEvent(t.element,"mouseover",function(){var t;(t=k).addClass("highcharts-treegrid-node-active"),t.renderer.styledMode||t.css({textDecoration:"underline"})}),N.addEvent(t.element,"mouseout",function(){var t,e,i;t=k,i=C((e=P).style)?e.style:{},t.removeClass("highcharts-treegrid-node-active"),t.renderer.styledMode||t.css({textDecoration:i.textDecoration})}),N.addEvent(t.element,"click",function(){g.toggleCollapse()}),t.attachedTreeGridEvents=!0)}))}}),n(x.prototype,{collapse:function(t){var e=this.axis,i=this.pos,n=e.mapOfPosToGridNode[i],o=d(e,n);e.setBreaks(o,j(t,!0))},expand:function(t){var e=this.axis,i=this.pos,n=e.mapOfPosToGridNode[i],o=a(e,n);e.setBreaks(o,j(t,!0))},toggleCollapse:function(t){var e,i,n=this.axis,o=this.pos,s=n.mapOfPosToGridNode[o],r=(G(e=n,i=s)?a:d)(e,i);n.setBreaks(r,j(t,!0))}}),v.prototype.utils={getNode:f.getNode}}),i(e,"masters/modules/treegrid.src.js",[],function(){})});