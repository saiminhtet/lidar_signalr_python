"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/pattern-fill",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){var e=t?t._modules:{};function i(t,e,i,r){t.hasOwnProperty(e)||(t[e]=r.apply(null,i))}i(e,"modules/pattern-fill.src.js",[e["parts/Globals.js"],e["parts/Utilities.js"]],function(f,t){var r=t.erase,g=t.pick,e=f.addEvent,i=f.wrap,h=f.merge;function s(t,e){var i,r=JSON.stringify(t),a=r.length||0,n=0,o=0;if(e){i=Math.max(Math.floor(a/500),1);for(var h=0;h<a;h+=i)n+=r.charCodeAt(h);n&=n}for(;o<a;++o)n=(n<<5)-n+r.charCodeAt(o),n&=n;return n.toString(16).replace("-","1")}f.Point.prototype.calculatePatternDimensions=function(t){if(!t.width||!t.height){var e=this.graphic&&(this.graphic.getBBox&&this.graphic.getBBox(!0)||this.graphic.element&&this.graphic.element.getBBox())||{},i=this.shapeArgs;if(i&&(e.width=i.width||e.width,e.height=i.height||e.height,e.x=i.x||e.x,e.y=i.y||e.y),t.image){if(!e.width||!e.height)return t._width="defer",void(t._height="defer");t.aspectRatio&&(e.aspectRatio=e.width/e.height,t.aspectRatio>e.aspectRatio?e.aspectWidth=e.height*t.aspectRatio:e.aspectHeight=e.width/t.aspectRatio),t._width=t.width||Math.ceil(e.aspectWidth||e.width),t._height=t.height||Math.ceil(e.aspectHeight||e.height)}t.width||(t._x=t.x||0,t._x+=e.x-Math.round(e.aspectWidth?Math.abs(e.aspectWidth-e.width)/2:0)),t.height||(t._y=t.y||0,t._y+=e.y-Math.round(e.aspectHeight?Math.abs(e.aspectHeight-e.height)/2:0))}},f.SVGRenderer.prototype.addPattern=function(e,t){var i,r,a,n,o=g(t,!0),h=f.animObject(o),s=e.width||e._width||32,d=e.height||e._height||32,c=e.color||"#343434",p=e.id,l=this;if(p||(this.idCounter=this.idCounter||0,p="highcharts-pattern-"+(this.chartIndex||0)+"-"+this.idCounter,++this.idCounter),this.defIds=this.defIds||[],!(-1<this.defIds.indexOf(p)))return this.defIds.push(p),(i=this.createElement("pattern").attr({id:p,patternUnits:"userSpaceOnUse",patternContentUnits:e.patternContentUnits||"userSpaceOnUse",width:s,height:d,x:e._x||e.x||0,y:e._y||e.y||0}).add(this.defs)).id=p,e.path?(r=e.path,e.backgroundColor&&(n=e.backgroundColor,l.rect(0,0,s,d).attr({fill:n}).add(i)),a={d:r.d||r},this.styledMode||(a.stroke=r.stroke||c,a["stroke-width"]=g(r.strokeWidth,2),a.fill=r.fill||"none"),r.transform&&(a.transform=r.transform),this.createElement("path").attr(a).add(i),i.color=c):e.image&&(o?this.image(e.image,0,0,s,d,function(){this.animate({opacity:g(e.opacity,1)},h),f.removeEvent(this.element,"load")}).attr({opacity:0}).add(i):this.image(e.image,0,0,s,d).add(i)),e.image&&o||void 0===e.opacity||[].forEach.call(i.element.childNodes,function(t){t.setAttribute("opacity",e.opacity)}),this.patternElements=this.patternElements||{},this.patternElements[p]=i},i(f.Series.prototype,"getColor",function(t){var e=this.options.color;e&&e.pattern&&!e.pattern.color?(delete this.options.color,t.apply(this,Array.prototype.slice.call(arguments,1)),e.pattern.color=this.color,this.color=this.options.color=e):t.apply(this,Array.prototype.slice.call(arguments,1))}),e(f.Series,"render",function(){var i=this.chart.isResizing;!this.isDirtyData&&!i&&this.chart.hasRendered||(this.points||[]).forEach(function(t){var e=t.options&&t.options.color;e&&e.pattern&&(!i||t.shapeArgs&&t.shapeArgs.width&&t.shapeArgs.height?t.calculatePatternDimensions(e.pattern):(e.pattern._width="defer",e.pattern._height="defer"))})}),e(f.Point,"afterInit",function(){var t=this,e=t.options.color;e&&e.pattern&&("string"==typeof e.pattern.path&&(e.pattern.path={d:e.pattern.path}),t.color=t.options.color=h(t.series.options.color,e))}),f.addEvent(f.SVGRenderer,"complexColor",function(t){var e,i=t.args[0],r=t.args[1],a=t.args[2],n=i.pattern,o="#343434";return!n||(o=n.image||"string"==typeof n.path||n.path&&n.path.d?(e=(e=a.parentNode&&a.parentNode.getAttribute("class"))&&-1<e.indexOf("highcharts-legend"),"defer"!==n._width&&"defer"!==n._height||f.Point.prototype.calculatePatternDimensions.call({graphic:{element:a}},n),!e&&n.id||((n=h({},n)).id="highcharts-pattern-"+(this.chartIndex||0)+"-"+s(n)+s(n,!0)),this.addPattern(n,!this.forExport&&g(n.animation,this.globalAnimation,{duration:100})),"url("+this.url+"#"+n.id+")"):n.color||o,a.setAttribute(r,o),!(i.toString=function(){return o}))}),f.addEvent(f.Chart,"endResize",function(){(this.renderer&&this.renderer.defIds||[]).filter(function(t){return t&&t.indexOf&&0===t.indexOf("highcharts-pattern-")}).length&&(this.series.forEach(function(t){t.points.forEach(function(t){var e=t.options&&t.options.color;e&&e.pattern&&(e.pattern._width="defer",e.pattern._height="defer")})}),this.redraw(!1))}),f.addEvent(f.Chart,"redraw",function(){var i=[],e=this.renderer,t=(e.defIds||[]).filter(function(t){return t.indexOf&&0===t.indexOf("highcharts-pattern-")});t.length&&([].forEach.call(this.renderTo.querySelectorAll('[color^="url(#"], [fill^="url(#"], [stroke^="url(#"]'),function(t){var e=t.getAttribute("fill")||t.getAttribute("color")||t.getAttribute("stroke");e&&i.push(e.substring(e.indexOf("url(#")+5).replace(")",""))}),t.forEach(function(t){-1===i.indexOf(t)&&(r(e.defIds,t),e.patternElements[t]&&(e.patternElements[t].destroy(),delete e.patternElements[t]))}))}),f.Chart.prototype.callbacks.push(function(i){var r=f.getOptions().colors,a=i.index,n=i.options.chart.forExport;["M 0 0 L 10 10 M 9 -1 L 11 1 M -1 9 L 1 11","M 0 10 L 10 0 M -1 1 L 1 -1 M 9 11 L 11 9","M 3 0 L 3 10 M 8 0 L 8 10","M 0 3 L 10 3 M 0 8 L 10 8","M 0 3 L 5 3 L 5 0 M 5 10 L 5 7 L 10 7","M 3 3 L 8 3 L 8 8 L 3 8 Z","M 5 5 m -4 0 a 4 4 0 1 1 8 0 a 4 4 0 1 1 -8 0","M 10 3 L 5 3 L 5 0 M 5 10 L 5 7 L 0 7","M 2 5 L 5 2 L 8 5 L 5 8 Z","M 0 0 L 5 10 L 10 0"].forEach(function(t,e){i.renderer.addPattern({id:"highcharts-default-pattern-"+(a&&!n?a+"-":"")+e,path:t,color:r[e],width:10,height:10})})})}),i(e,"masters/modules/pattern-fill.src.js",[],function(){})});