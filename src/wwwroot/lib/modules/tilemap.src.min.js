"use strict";!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/modules/tilemap",["highcharts","highcharts/modules/map"],function(e){return t(e),t.Highcharts=e,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(e){var t=e?e._modules:{};function a(e,t,a,n){e.hasOwnProperty(t)||(e[t]=n.apply(null,a))}a(t,"modules/tilemap.src.js",[t["parts/Globals.js"],t["parts/Utilities.js"]],function(t,e){function P(e,t,a){return Math.min(Math.max(t,e),a)}function a(e,t,a){var n=e.options;return{xPad:(n.colsize||1)/-t,yPad:(n.rowsize||1)/-a}}var n=e.extend,m=e.pick,i=t.seriesType;t.tileShapeTypes={hexagon:{alignDataLabel:t.seriesTypes.scatter.prototype.alignDataLabel,getSeriesPadding:function(e){return a(e,3,2)},haloPath:function(e){if(!e)return[];var t=this.tileEdges;return["M",t.x2-e,t.y1+e,"L",t.x3+e,t.y1+e,t.x4+1.5*e,t.y2,t.x3+e,t.y3-e,t.x2-e,t.y3-e,t.x1-1.5*e,t.y2,"Z"]},translate:function(){var u,e=this,t=e.options,y=e.xAxis,g=e.yAxis,x=t.pointPadding||0,f=(t.colsize||1)/3,M=(t.rowsize||1)/2;e.generatePoints(),e.points.forEach(function(e){var t=P(Math.floor(y.len-y.translate(e.x-2*f,0,1,0,1)),-y.len,2*y.len),a=P(Math.floor(y.len-y.translate(e.x-f,0,1,0,1)),-y.len,2*y.len),n=P(Math.floor(y.len-y.translate(e.x+f,0,1,0,1)),-y.len,2*y.len),i=P(Math.floor(y.len-y.translate(e.x+2*f,0,1,0,1)),-y.len,2*y.len),r=P(Math.floor(g.translate(e.y-M,0,1,0,1)),-g.len,2*g.len),s=P(Math.floor(g.translate(e.y,0,1,0,1)),-g.len,2*g.len),l=P(Math.floor(g.translate(e.y+M,0,1,0,1)),-g.len,2*g.len),o=m(e.pointPadding,x),p=o*Math.abs(a-t)/Math.abs(l-s),h=y.reversed?-p:p,d=y.reversed?-o:o,c=g.reversed?-o:o;e.x%2&&(r+=u=u||Math.round(Math.abs(l-r)/2)*(g.reversed?-1:1),s+=u,l+=u),e.plotX=e.clientX=(a+n)/2,e.plotY=s,t+=h+d,a+=d,n-=d,i-=h+d,r-=c,l+=c,e.tileEdges={x1:t,x2:a,x3:n,x4:i,y1:r,y2:s,y3:l},e.shapeType="path",e.shapeArgs={d:["M",a,r,"L",n,r,i,s,n,l,a,l,t,s,"Z"]}}),e.translateColors()}},diamond:{alignDataLabel:t.seriesTypes.scatter.prototype.alignDataLabel,getSeriesPadding:function(e){return a(e,2,2)},haloPath:function(e){if(!e)return[];var t=this.tileEdges;return["M",t.x2,t.y1+e,"L",t.x3+e,t.y2,t.x2,t.y3-e,t.x1-e,t.y2,"Z"]},translate:function(){var d,e=this,t=e.options,c=e.xAxis,u=e.yAxis,y=t.pointPadding||0,g=t.colsize||1,x=(t.rowsize||1)/2;e.generatePoints(),e.points.forEach(function(e){var t=P(Math.round(c.len-c.translate(e.x-g,0,1,0,0)),-c.len,2*c.len),a=P(Math.round(c.len-c.translate(e.x,0,1,0,0)),-c.len,2*c.len),n=P(Math.round(c.len-c.translate(e.x+g,0,1,0,0)),-c.len,2*c.len),i=P(Math.round(u.translate(e.y-x,0,1,0,0)),-u.len,2*u.len),r=P(Math.round(u.translate(e.y,0,1,0,0)),-u.len,2*u.len),s=P(Math.round(u.translate(e.y+x,0,1,0,0)),-u.len,2*u.len),l=m(e.pointPadding,y),o=l*Math.abs(a-t)/Math.abs(s-r),p=c.reversed?-o:o,h=u.reversed?-l:l;e.x%2&&(i+=d=Math.abs(s-i)/2*(u.reversed?-1:1),r+=d,s+=d),e.plotX=e.clientX=a,e.plotY=r,t+=p,n-=p,i-=h,s+=h,e.tileEdges={x1:t,x2:a,x3:n,y1:i,y2:r,y3:s},e.shapeType="path",e.shapeArgs={d:["M",a,i,"L",n,r,a,s,t,r,"Z"]}}),e.translateColors()}},circle:{alignDataLabel:t.seriesTypes.scatter.prototype.alignDataLabel,getSeriesPadding:function(e){return a(e,2,2)},haloPath:function(e){return t.seriesTypes.scatter.prototype.pointClass.prototype.haloPath.call(this,e+(e&&this.radius))},translate:function(){var r,s,l,o,e=this,t=e.options,p=e.xAxis,h=e.yAxis,d=t.pointPadding||0,c=(t.rowsize||1)/2,u=t.colsize||1,y=!1;e.generatePoints(),e.points.forEach(function(e){var t=P(Math.round(p.len-p.translate(e.x,0,1,0,0)),-p.len,2*p.len),a=P(Math.round(h.translate(e.y,0,1,0,0)),-h.len,2*h.len),n=d,i=!1;void 0!==e.pointPadding&&(n=e.pointPadding,y=i=!0),o&&!y||(r=Math.abs(P(Math.floor(p.len-p.translate(e.x+u,0,1,0,0)),-p.len,2*p.len)-t),s=Math.abs(P(Math.floor(h.translate(e.y+c,0,1,0,0)),-h.len,2*h.len)-a),l=Math.floor(Math.sqrt(r*r+s*s)/2),o=Math.min(r,l,s)-n,y&&!i&&(y=!1)),e.x%2&&(a+=s*(h.reversed?-1:1)),e.plotX=e.clientX=t,e.plotY=a,e.radius=o,e.shapeType="circle",e.shapeArgs={x:t,y:a,r:o}}),e.translateColors()}},square:{alignDataLabel:t.seriesTypes.heatmap.prototype.alignDataLabel,translate:t.seriesTypes.heatmap.prototype.translate,getSeriesPadding:function(){},haloPath:t.seriesTypes.heatmap.prototype.pointClass.prototype.haloPath}},t.addEvent(t.Axis,"afterSetAxisTranslation",function(){var t,e,a;this.recomputingForTilemap||"colorAxis"===this.coll||(e=(t=this).series.map(function(e){return e.getSeriesPixelPadding&&e.getSeriesPixelPadding(t)}).reduce(function(e,t){return(e&&e.padding)>(t&&t.padding)?e:t},void 0)||{padding:0,axisLengthFactor:1},a=Math.round(e.padding*e.axisLengthFactor),e.padding&&(t.len-=a,t.recomputingForTilemap=!0,t.setAxisTranslation(),delete t.recomputingForTilemap,t.minPixelPadding+=e.padding,t.len+=a))}),i("tilemap","heatmap",{states:{hover:{halo:{enabled:!0,size:2,opacity:.5,attributes:{zIndex:3}}}},pointPadding:2,tileShape:"hexagon"},{setOptions:function(){var e=t.seriesTypes.heatmap.prototype.setOptions.apply(this,Array.prototype.slice.call(arguments));return this.tileShape=t.tileShapeTypes[e.tileShape],e},alignDataLabel:function(){return this.tileShape.alignDataLabel.apply(this,Array.prototype.slice.call(arguments))},getSeriesPixelPadding:function(e){var t,a,n=e.isXAxis,i=this.tileShape.getSeriesPadding(this);return i?(t=Math.round(e.translate(n?2*i.xPad:i.yPad,0,1,0,1)),a=Math.round(e.translate(n?i.xPad:0,0,1,0,1)),{padding:Math.abs(t-a)||0,axisLengthFactor:n?2:1.1}):{padding:0,axisLengthFactor:1}},translate:function(){return this.tileShape.translate.apply(this,Array.prototype.slice.call(arguments))}},n({haloPath:function(){return this.series.tileShape.haloPath.apply(this,Array.prototype.slice.call(arguments))}},t.colorPointMixin))}),a(t,"masters/modules/tilemap.src.js",[],function(){})});