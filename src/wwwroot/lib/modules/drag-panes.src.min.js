"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/drag-panes",["highcharts","highcharts/modules/stock"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){var e=t?t._modules:{};function o(t,e,o,i){t.hasOwnProperty(e)||(t[e]=i.apply(null,o))}o(e,"modules/drag-panes.src.js",[e["parts/Globals.js"],e["parts/Utilities.js"]],function(s,t){var z=t.isNumber,e=t.objectEach,a=s.hasTouch,o=s.merge,i=s.wrap,h=s.addEvent,b=s.relativeLength,n=s.Axis,r=s.Pointer;o(!0,n.prototype.defaultYAxisOptions,{minLength:"10%",maxLength:"100%",resize:{controlledAxis:{next:[],prev:[]},enabled:!1,cursor:"ns-resize",lineColor:"#cccccc",lineDashStyle:"Solid",lineWidth:4,x:0,y:0}}),s.AxisResizer=function(t){this.init(t)},s.AxisResizer.prototype={init:function(t,e){this.axis=t,this.options=t.options.resize,this.render(),e||this.addMouseEvents()},render:function(){var t,e=this,o=e.axis,i=o.chart,s=e.options,n=s.x,r=s.y,a=Math.min(Math.max(o.top+o.height+r,i.plotTop),i.plotTop+i.plotHeight),h={};i.styledMode||(h={cursor:s.cursor,stroke:s.lineColor,"stroke-width":s.lineWidth,dashstyle:s.lineDashStyle}),e.lastPos=a-r,e.controlLine||(e.controlLine=i.renderer.path().addClass("highcharts-axis-resizer")),e.controlLine.add(o.axisGroup),t=i.styledMode?e.controlLine.strokeWidth():s.lineWidth,h.d=i.renderer.crispLine(["M",o.left+n,a,"L",o.left+o.width+n,a],t),e.controlLine.attr(h)},addMouseEvents:function(){var t,e,o,i=this,s=i.controlLine.element,n=i.axis.chart.container,r=[];i.mouseMoveHandler=t=function(t){i.onMouseMove(t)},i.mouseUpHandler=e=function(t){i.onMouseUp(t)},i.mouseDownHandler=o=function(t){i.onMouseDown(t)},r.push(h(n,"mousemove",t),h(n.ownerDocument,"mouseup",e),h(s,"mousedown",o)),a&&r.push(h(n,"touchmove",t),h(n.ownerDocument,"touchend",e),h(s,"touchstart",o)),i.eventsToUnbind=r},onMouseMove:function(t){t.touches&&0===t.touches[0].pageX||this.grabbed&&(this.hasDragged=!0,this.updateAxes(this.axis.chart.pointer.normalize(t).chartY-this.options.y))},onMouseUp:function(t){this.hasDragged&&this.updateAxes(this.axis.chart.pointer.normalize(t).chartY-this.options.y),this.grabbed=this.hasDragged=this.axis.chart.activeResizer=null},onMouseDown:function(t){this.axis.chart.pointer.reset(!1,0),this.grabbed=this.axis.chart.activeResizer=!0},updateAxes:function(u){function d(t){return 100*t/v+"%"}function p(t,e,o){return Math.round(Math.min(Math.max(t,e),o))}var l,f=this,x=f.axis.chart,t=f.options.controlledAxis,e=0===t.next.length?[x.yAxis.indexOf(f.axis)+1]:t.next,o=[f.axis].concat(t.prev),g=[],m=!1,y=x.plotTop,v=x.plotHeight,M=y+v;u=Math.max(Math.min(u,M),y),(l=u-f.lastPos)*l<1||([o,e].forEach(function(t,c){t.forEach(function(t,e){var o,i,s,n,r=z(t)?x.yAxis[t]:c||e?x.get(t):t,a=r&&r.options,h=0;a&&"navigator-y-axis"!==a.id&&(i=r.top,s=Math.round(b(a.minLength,v)),n=Math.round(b(a.maxLength,v)),c?(l=u-f.lastPos,o=p(r.len-l,s,n),i=r.top+l,M<i+o&&(u+=h=M-o-i,i+=h),i<y&&M<(i=y)+o&&(o=v),o===s&&(m=!0),g.push({axis:r,options:{top:d(i-y),height:d(o)}})):((o=p(u-i,s,n))===n&&(m=!0),u=i+o,g.push({axis:r,options:{height:d(o)}})))})}),m||(g.forEach(function(t){t.axis.update(t.options,!1)}),x.redraw(!1)))},destroy:function(){var o=this;delete o.axis.resizer,this.eventsToUnbind&&this.eventsToUnbind.forEach(function(t){t()}),o.controlLine.destroy(),e(o,function(t,e){o[e]=null})}},n.prototype.keepProps.push("resizer"),h(n,"afterRender",function(){var t,e=this,o=e.resizer,i=e.options.resize;i&&(t=!1!==i.enabled,o?t?o.init(e,!0):o.destroy():t&&(e.resizer=new s.AxisResizer(e)))}),h(n,"destroy",function(t){!t.keepEvents&&this.resizer&&this.resizer.destroy()}),i(r.prototype,"runPointActions",function(t){this.chart.activeResizer||t.apply(this,Array.prototype.slice.call(arguments,1))}),i(r.prototype,"drag",function(t){this.chart.activeResizer||t.apply(this,Array.prototype.slice.call(arguments,1))})}),o(e,"masters/modules/drag-panes.src.js",[],function(){})});