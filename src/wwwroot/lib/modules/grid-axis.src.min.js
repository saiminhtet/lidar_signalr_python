"use strict";!function(i){"object"==typeof module&&module.exports?module.exports=i.default=i:"function"==typeof define&&define.amd?define("highcharts/modules/grid-axis",["highcharts"],function(t){return i(t),i.Highcharts=t,i}):i("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){var i=t?t._modules:{};function e(t,i,e,n){t.hasOwnProperty(i)||(t[i]=n.apply(null,e))}e(i,"parts-gantt/GridAxis.js",[i["parts/Globals.js"],i["parts/Utilities.js"]],function(g,i){function O(t){return i.isObject(t,!0)}var s=i.defined,x=i.erase,z=i.isArray,S=i.isNumber,b=i.pick,e=g.addEvent,n=g.dateFormat,m=g.merge,p=g.wrap,t=g.Chart,k=g.Axis,o=g.Tick,w={top:0,right:1,bottom:2,left:3,0:"top",1:"right",2:"bottom",3:"left"};k.prototype.isOuterAxis=function(){var e=this,t=e.chart,i=e.columnIndex,n=e.linkedParent&&e.linkedParent.columns||e.columns,s=i?e.linkedParent:e,o=-1,r=0;return t[e.coll].forEach(function(t,i){t.side!==e.side||t.options.isInternal||(r=i,t===s&&(o=i))}),r===o&&(!S(i)||n.length===i)},k.prototype.getMaxLabelDimensions=function(o,t){var r={width:0,height:0};return t.forEach(function(t){var i,e=o[t],n=0,s=0;O(e)&&(n=(i=O(e.label)?e.label:{}).getBBox?i.getBBox().height:0,i.textStr&&!S(i.textPxLength)&&(i.textPxLength=i.getBBox().width),s=S(i.textPxLength)?Math.round(i.textPxLength):0,r.height=Math.max(n,r.height),r.width=Math.max(s,r.width))}),r},g.dateFormats.W=function(t){var i,e=new Date(t);return e.setHours(0,0,0,0),e.setDate(e.getDate()-(e.getDay()||7)),i=new Date(e.getFullYear(),0,1),Math.ceil(((e-i)/864e5+1)/7)},g.dateFormats.E=function(t){return n("%a",t,!0).charAt(0)},e(o,"afterGetLabelPosition",function(t){var i,e,n,s,o,r,a,l=this.label,h=this.axis,d=h.reversed,c=h.chart,f=h.options,u=f&&O(f.grid)?f.grid:{},g=h.options.labels,x=g.align,m=w[h.side],p=t.tickmarkOffset,k=h.tickPositions,b=this.pos-p,P=S(k[t.index+1])?k[t.index+1]-p:h.max+p,v=h.tickSize("tick",!0),y=z(v)?v[0]:0,L=v&&v[1]/2;!0===u.enabled&&("top"===m?o=(s=h.top+h.offset)-y:"bottom"===m?s=(o=c.chartHeight-h.bottom+h.offset)+y:(s=h.top+h.len-h.translate(d?P:b),o=h.top+h.len-h.translate(d?b:P)),"right"===m?a=(r=c.chartWidth-h.right+h.offset)+y:"left"===m?r=(a=h.left+h.offset)-y:(r=Math.round(h.left+h.translate(d?P:b))-L,a=Math.round(h.left+h.translate(d?b:P))-L),this.slotWidth=a-r,t.pos.x="left"===x?r:"right"===x?a:r+(a-r)/2,t.pos.y=o+(s-o)/2,e=c.renderer.fontMetrics(g.style.fontSize,l.element),i=l.getBBox().height,g.useHTML?t.pos.y+=e.b+-i/2:(n=Math.round(i/e.h),t.pos.y+=(e.b-(e.h-e.f))/2+-((n-1)*e.h)/2),t.pos.x+=h.horiz&&g.x||0)}),e(k,"afterTickSize",function(t){var i,e=this.maxLabelDimensions,n=this.options;!0===(n&&O(n.grid)?n.grid:{}).enabled&&(i=2*Math.abs(this.defaultLeftAxisOptions.labels.x)+(this.horiz?e.height:e.width),z(t.tickSize)?t.tickSize[0]=i:t.tickSize=[i])}),e(k,"afterGetTitlePosition",function(t){var i,e,n,s,o,r,a,l,h,d,c,f,u,g,x,m,p=this,k=p.options;!0===(k&&O(k.grid)?k.grid:{}).enabled&&(e=(i=p.axisTitle)&&i.getBBox().width,n=p.horiz,s=p.left,o=p.top,r=p.width,a=p.height,l=k.title,h=p.opposite,d=p.offset,c=p.tickSize()||[0],f=l.x||0,u=l.y||0,g=b(l.margin,n?5:10),x=p.chart.renderer.fontMetrics(l.style&&l.style.fontSize,i).f,m=(n?o+a:s)+(n?1:-1)*(h?-1:1)*(c[0]/2)+(p.side===w.bottom?x:0),t.titlePosition.x=n?s-e/2-g+f:m+(h?r:0)+d+f,t.titlePosition.y=n?m-(h?a:0)+(h?x:-x)/2+d+u:o-g+u)}),p(k.prototype,"unsquish",function(t){var i,e=this.options;return!0===(e&&O(e.grid)?e.grid:{}).enabled&&this.categories?this.tickInterval:t.apply(this,(i=arguments,Array.prototype.slice.call(i,1)))}),e(k,"afterSetOptions",function(t){var h,i=this.options,e=t.userOptions,n=i&&O(i.grid)?i.grid:{};!0===n.enabled&&(h=m(!0,{className:"highcharts-grid-axis "+(e.className||""),dateTimeLabelFormats:{hour:{list:["%H:%M","%H"]},day:{list:["%A, %e. %B","%a, %e. %b","%E"]},week:{list:["Week %W","W%W"]},month:{list:["%B","%b","%o"]}},grid:{borderWidth:1},labels:{padding:2,style:{fontSize:"13px"}},margin:0,title:{text:null,reserveSpace:!1,rotation:0},units:[["millisecond",[1,10,100]],["second",[1,10]],["minute",[1,5,15]],["hour",[1,6]],["day",[1]],["week",[1]],["month",[1]],["year",null]]},e),"xAxis"===this.coll&&(s(e.linkedTo)&&!s(e.tickPixelInterval)&&(h.tickPixelInterval=350),s(e.tickPixelInterval)||!s(e.linkedTo)||s(e.tickPositioner)||s(e.tickInterval)||(h.tickPositioner=function(t,i){var e=this.linkedParent&&this.linkedParent.tickPositions&&this.linkedParent.tickPositions.info;if(e){for(var n,s,o,r,a=h.units,l=0;l<a.length;l++)if(a[l][0]===e.unitName){n=l;break}if(!a[n][1])return;return a[n+1]&&(o=a[n+1][0],s=(a[n+1][1]||[1])[0]),r=g.timeUnits[o],this.tickInterval=r*s,this.getTimeTicks({unitRange:r,count:s,unitName:o},t,i,this.options.startOfWeek)}})),m(!0,this.options,h),this.horiz&&(i.minPadding=b(e.minPadding,0),i.maxPadding=b(e.maxPadding,0)),S(i.grid.borderWidth)&&(i.tickWidth=i.lineWidth=n.borderWidth))}),e(k,"afterSetAxisTranslation",function(){var t=this.options,i=t&&O(t.grid)?t.grid:{},e=this.tickPositions&&this.tickPositions.info,n=this.userOptions.labels||{};this.horiz&&(!0===i.enabled&&this.series.forEach(function(t){t.options.pointRange=0}),e&&(!1===t.dateTimeLabelFormats[e.unitName].range||1<e.count)&&!s(n.align)&&(t.labels.align="left",s(n.x)||(t.labels.x=3)))}),e(k,"trimTicks",function(){var t=this,i=t.options,e=i&&O(i.grid)?i.grid:{},n=t.categories,s=t.tickPositions,o=s[0],r=s[s.length-1],a=t.linkedParent&&t.linkedParent.min,l=t.linkedParent&&t.linkedParent.max,h=a||t.min,d=l||t.max,c=t.tickInterval,f=o<h&&h<o+c,u=d<r&&r-c<d;!0!==e.enabled||n||!t.horiz&&!t.isLinked||(f&&!i.startOnTick&&(s[0]=h),u&&!i.endOnTick&&(s[s.length-1]=d))}),e(k,"afterRender",function(){var t,i,e,n,s,o,r,a=this,l=a.options,h=l&&O(l.grid)?l.grid:{},d=a.chart.renderer;!0===h.enabled&&(a.maxLabelDimensions=a.getMaxLabelDimensions(a.ticks,a.tickPositions),a.rightWall&&a.rightWall.destroy(),a.isOuterAxis()&&a.axisLine&&((t=l.lineWidth)&&(e=(i=a.getLinePath(t)).indexOf("M")+1,n=i.indexOf("L")+1,s=i.indexOf("M")+2,o=i.indexOf("L")+2,r=(a.tickSize("tick")[0]-1)*(a.side===w.top||a.side===w.left?-1:1),a.horiz?(i[s]=i[s]+r,i[o]=i[o]+r):(i[e]=i[e]+r,i[n]=i[n]+r),a.axisLineExtra?a.axisLineExtra.animate({d:i}):(a.axisLineExtra=d.path(i).attr({zIndex:7}).addClass("highcharts-axis-line").add(a.axisGroup),d.styledMode||a.axisLineExtra.attr({stroke:l.lineColor,"stroke-width":t})),a.axisLine[a.showAxis?"show":"hide"](!0))),(a.columns||[]).forEach(function(t){t.render()}))});var r={afterGetOffset:function(){(this.columns||[]).forEach(function(t){t.getOffset()})},afterInit:function(){var t,i,e,n,s,o=this,r=o.chart,a=o.userOptions,l=o.options,h=l&&O(l.grid)?l.grid:{};if(h.enabled&&(i=(t=o).options,e=i&&O(i.grid)?i.grid:{},n=i.labels.style.fontSize,s=t.chart.renderer.fontMetrics(n),i.labels||(i.labels={}),i.labels.align=b(i.labels.align,"center"),t.categories||(i.showLastLabel=!1),t.horiz&&(i.tickLength=e.cellHeight||s.h*(25/11)),t.labelRotation=0,i.labels.rotation=0,p(o,"labelFormatter",function(t){var i=this.axis,e=i.tickPositions,n=this.value,s=(i.isLinked?i.linkedParent:i).series[0],o=n===e[0],r=n===e[e.length-1],a=s&&g.find(s.options.data,function(t){return t[i.isXAxis?"x":"y"]===n});return this.isFirst=o,this.isLast=r,this.point=a,t.call(this)})),h.columns)for(var d=o.columns=[],c=o.columnIndex=0;++c<h.columns.length;){var f=m(a,h.columns[h.columns.length-c-1],{linkedTo:0,type:"category"});delete f.grid.columns;var u=new k(o.chart,f,!0);u.isColumn=!0,u.columnIndex=c,x(r.axes,u),x(r[o.coll],u),d.push(u)}},afterSetOptions:function(t){var i=t.userOptions,e=i&&O(i.grid)?i.grid:{},n=e.columns;e.enabled&&n&&m(!0,this.options,n[n.length-1])},afterSetScale:function(){(this.columns||[]).forEach(function(t){t.setScale()})},destroy:function(i){(this.columns||[]).forEach(function(t){t.destroy(i.keepEvents)})},init:function(t){var i=t.userOptions,e=i&&O(i.grid)?i.grid:{};e.enabled&&s(e.borderColor)&&(i.tickColor=i.lineColor=e.borderColor)}};Object.keys(r).forEach(function(t){e(k,t,r[t])}),e(t,"afterSetChartSize",function(){this.axes.forEach(function(t){(t.columns||[]).forEach(function(t){t.setAxisSize(),t.setAxisTranslation()})})})}),e(i,"masters/modules/grid-axis.src.js",[],function(){})});