"use strict";import H from"../parts/Globals.js";import U from"../parts/Utilities.js";var pick=U.pick,deg2rad=H.deg2rad;function rotate3D(t,e,i,o){return{x:o.cosB*t-o.sinB*i,y:-o.sinA*o.sinB*t+o.cosA*e-o.cosB*o.sinA*i,z:o.cosA*o.sinB*t+o.sinA*e+o.cosA*o.cosB*i}}H.perspective3D=function(t,e,i){var o=i>0&&i<Number.POSITIVE_INFINITY?i/(t.z+e.z+i):1;return{x:t.x*o,y:t.y*o}},H.perspective=function(t,e,i){var o=e.options.chart.options3d,r=!!i&&e.inverted,p={x:e.plotWidth/2,y:e.plotHeight/2,z:o.depth/2,vd:pick(o.depth,1)*pick(o.viewDistance,0)},s=e.scale3d||1,n=deg2rad*o.beta*(r?-1:1),a=deg2rad*o.alpha*(r?-1:1),c={cosA:Math.cos(a),cosB:Math.cos(-n),sinA:Math.sin(a),sinB:Math.sin(-n)};return i||(p.x+=e.plotLeft,p.y+=e.plotTop),t.map(function(t){var e=rotate3D((r?t.y:t.x)-p.x,(r?t.x:t.y)-p.y,(t.z||0)-p.z,c),i=H.perspective3D(e,p,p.vd);return i.x=i.x*s+p.x,i.y=i.y*s+p.y,i.z=e.z*s+p.z,{x:r?i.y:i.x,y:r?i.x:i.y,z:i.z}})},H.pointCameraDistance=function(t,e){var i=e.options.chart.options3d,o=e.plotWidth/2,r=e.plotHeight/2,p=pick(i.depth,1)*pick(i.viewDistance,0)+i.depth;return Math.sqrt(Math.pow(o-t.plotX,2)+Math.pow(r-t.plotY,2)+Math.pow(p-t.plotZ,2))},H.shapeArea=function(t){var e,i,o=0;for(e=0;e<t.length;e++)i=(e+1)%t.length,o+=t[e].x*t[i].y-t[i].x*t[e].y;return o/2},H.shapeArea3d=function(t,e,i){return H.shapeArea(H.perspective(t,e,i))};