"use strict";import H from"../parts/Globals.js";import U from"../parts/Utilities.js";var defined=U.defined,seriesTypes=H.seriesTypes,stableSort=H.stableSort,onSeriesMixin={getPlotBox:function(){return H.Series.prototype.getPlotBox.call(this.options.onSeries&&this.chart.get(this.options.onSeries)||this)},translate:function(){seriesTypes.column.prototype.translate.apply(this);var t,e,o,s,i,n,r,p=this,l=p.options,a=p.chart,x=p.points,f=x.length-1,y=l.onSeries,d=y&&a.get(y),c=l.onKey||"y",h=d&&d.options.step,u=d&&d.points,S=u&&u.length,g=a.inverted,v=p.xAxis,b=p.yAxis,X=0;if(d&&d.visible&&S)for(X=(d.pointXOffset||0)+(d.barW||0)/2,n=d.currentDataGrouping,s=u[S-1].x+(n?n.totalRange:0),stableSort(x,function(t,e){return t.x-e.x}),c="plot"+c[0].toUpperCase()+c.substr(1);S--&&x[f]&&(o=u[S],(t=x[f]).y=o.y,!(o.x<=t.x&&void 0!==o[c]&&(t.x<=s&&(t.plotY=o[c],o.x<t.x&&!h&&(i=u[S+1])&&void 0!==i[c]&&(r=(t.x-o.x)/(i.x-o.x),t.plotY+=r*(i[c]-o[c]),t.y+=r*(i.y-o.y))),S++,--f<0))););x.forEach(function(t,o){var s;t.plotX+=X,(void 0===t.plotY||g)&&(t.plotX>=0&&t.plotX<=v.len?g?(t.plotY=v.translate(t.x,0,1,0,1),t.plotX=defined(t.y)?b.translate(t.y,0,0,0,1):0):t.plotY=(v.opposite?0:p.yAxis.len)+v.offset:t.shapeArgs={}),(e=x[o-1])&&e.plotX===t.plotX&&(void 0===e.stackIndex&&(e.stackIndex=0),s=e.stackIndex+1),t.stackIndex=s}),this.onSeries=d}};export default onSeriesMixin;