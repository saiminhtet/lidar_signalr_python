"use strict";import H from"../parts/Globals.js";import U from"../parts/Utilities.js";var defined=U.defined;import"../parts/Series.js";var Series=H.Series,addEvent=H.addEvent,noop=H.noop,derivedSeriesMixin={hasDerivedData:!0,init:function(){Series.prototype.init.apply(this,arguments),this.initialised=!1,this.baseSeries=null,this.eventRemovers=[],this.addEvents()},setDerivedData:noop,setBaseSeries:function(){var e=this.chart,i=this.options.baseSeries,s=defined(i)&&(e.series[i]||e.get(i));this.baseSeries=s||null},addEvents:function(){var e,i=this;e=addEvent(this.chart,"afterLinkSeries",function(){i.setBaseSeries(),i.baseSeries&&!i.initialised&&(i.setDerivedData(),i.addBaseSeriesEvents(),i.initialised=!0)}),this.eventRemovers.push(e)},addBaseSeriesEvents:function(){var e,i,s=this;e=addEvent(s.baseSeries,"updatedData",function(){s.setDerivedData()}),i=addEvent(s.baseSeries,"destroy",function(){s.baseSeries=null,s.initialised=!1}),s.eventRemovers.push(e,i)},destroy:function(){this.eventRemovers.forEach(function(e){e()}),Series.prototype.destroy.apply(this,arguments)}};export default derivedSeriesMixin;