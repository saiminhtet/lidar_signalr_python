"use strict";import H from"../parts/Globals.js";import U from"../parts/Utilities.js";var objectEach=U.objectEach;H.ajax=function(e){var t=H.merge(!0,{url:!1,type:"get",dataType:"json",success:!1,error:!1,data:!1,headers:{}},e),a={json:"application/json",xml:"application/xml",text:"text/plain",octet:"application/octet-stream"},r=new XMLHttpRequest;function s(e,a){t.error&&t.error(e,a)}if(!t.url)return!1;r.open(t.type.toUpperCase(),t.url,!0),t.headers["Content-Type"]||r.setRequestHeader("Content-Type",a[t.dataType]||a.text),objectEach(t.headers,function(e,t){r.setRequestHeader(t,e)}),r.onreadystatechange=function(){var e;if(4===r.readyState){if(200===r.status){if(e=r.responseText,"json"===t.dataType)try{e=JSON.parse(e)}catch(e){return s(r,e)}return t.success&&t.success(e)}s(r,r.responseText)}};try{t.data=JSON.stringify(t.data)}catch(e){}r.send(t.data||!0)},H.getJSON=function(e,t){H.ajax({url:e,success:t,dataType:"json",headers:{"Content-Type":"text/plain"}})};