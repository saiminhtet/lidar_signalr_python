"use strict";import U from"../parts/Utilities.js";var extend=U.extend,isNumber=U.isNumber,pick=U.pick,isFunction=function(e){return"function"==typeof e},getListOfParents=function(e,t){var n=e.reduce(function(e,t){var n=pick(t.parent,"");return void 0===e[n]&&(e[n]=[]),e[n].push(t),e},{});return Object.keys(n).forEach(function(e,r){var i=n[e];""!==e&&-1===t.indexOf(e)&&(i.forEach(function(e){r[""].push(e)}),delete r[e])}),n},getNode=function(e,t,n,r,i,s){var u,a,o,c=0,d=0,f=s&&s.after,p=s&&s.before,g={data:r,depth:n-1,id:e,level:n,parent:t};return isFunction(p)&&p(g,s),o=(i[e]||[]).map(function(t){var r=getNode(t.id,e,n+1,t,i,s),o=t.start,f=!0===t.milestone?o:t.end;return u=!isNumber(u)||o<u?o:u,a=!isNumber(a)||f>a?f:a,c=c+1+r.descendants,d=Math.max(r.height+1,d),r}),r&&(r.start=pick(r.start,u),r.end=pick(r.end,a)),extend(g,{children:o,descendants:c,height:d}),isFunction(f)&&f(g,s),g},getTree=function(e,t){var n=e.map(function(e){return e.id}),r=getListOfParents(e,n);return getNode("",null,1,null,r,t)},Tree={getListOfParents:getListOfParents,getNode:getNode,getTree:getTree};export default Tree;