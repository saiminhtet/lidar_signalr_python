"use strict";import H from"../parts/Globals.js";import U from"../parts/Utilities.js";var isNumber=U.isNumber,pick=U.pick,splat=U.splat;import"./CurrentDateIndicator.js";import"./GridAxis.js";import"../modules/static-scale.src.js";import"./TreeGrid.js";import"./Pathfinder.js";import"../modules/xrange.src.js";var dateFormat=H.dateFormat,merge=H.merge,seriesType=H.seriesType,seriesTypes=H.seriesTypes,Series=H.Series,parent=seriesTypes.xrange;seriesType("gantt","xrange",{grouping:!1,dataLabels:{enabled:!0},tooltip:{headerFormat:'<span style="font-size: 10px">{series.name}</span><br/>',pointFormat:null,pointFormatter:function(){var t,e,r=this.series,s=r.chart.tooltip,i=r.xAxis,a=r.tooltipOptions.dateTimeLabelFormats,o=i.options.startOfWeek,n=r.tooltipOptions,p=n.xDateFormat,l=this.options.milestone,d="<b>"+(this.name||this.yCategory)+"</b>";return n.pointFormat?this.tooltipFormatter(n.pointFormat):(p||(p=splat(s.getDateFormat(i.closestPointRange,this.start,o,a))[0]),t=dateFormat(p,this.start),e=dateFormat(p,this.end),d+="<br/>",l?d+=t+"<br/>":(d+="Start: "+t+"<br/>",d+="End: "+e+"<br/>"),d)}},connectors:{type:"simpleConnect",animation:{reversed:!0},startMarker:{enabled:!0,symbol:"arrow-filled",radius:4,fill:"#fa0",align:"left"},endMarker:{enabled:!1,align:"right"}}},{pointArrayMap:["start","end","y"],keyboardMoveVertical:!1,translatePoint:function(t){var e,r;parent.prototype.translatePoint.call(this,t),t.options.milestone&&(r=(e=t.shapeArgs).height,t.shapeArgs={x:e.x-r/2,y:e.y,width:r,height:r})},drawPoint:function(t,e){var r,s=this.options,i=this.chart.renderer,a=t.shapeArgs,o=t.plotY,n=t.graphic,p=t.selected&&"select",l=s.stacking&&!s.borderRadius;t.options.milestone?isNumber(o)&&null!==t.y?(r=i.symbols.diamond(a.x,a.y,a.width,a.height),n?n[e]({d:r}):t.graphic=n=i.path(r).addClass(t.getClassName(),!0).add(t.group||this.group),this.chart.styledMode||t.graphic.attr(this.pointAttribs(t,p)).shadow(s.shadow,null,l)):n&&(t.graphic=n.destroy()):parent.prototype.drawPoint.call(this,t,e)},setData:Series.prototype.setData,setGanttPointAliases:function(t){function e(e,r){void 0!==r&&(t[e]=r)}e("x",pick(t.start,t.x)),e("x2",pick(t.end,t.x2)),e("partialFill",pick(t.completed,t.partialFill)),e("connect",pick(t.dependency,t.connect))}},merge(parent.prototype.pointClass.prototype,{applyOptions:function(t,e){var r=merge(t);return H.seriesTypes.gantt.prototype.setGanttPointAliases(r),r=parent.prototype.pointClass.prototype.applyOptions.call(this,r,e)},isValid:function(){return("number"==typeof this.start||"number"==typeof this.x)&&("number"==typeof this.end||"number"==typeof this.x2||this.milestone)}}));