"use strict";import H from"../parts/Globals.js";import U from"../parts/Utilities.js";var isArray=U.isArray;import requiredIndicatorMixin from"../mixins/indicator-required.js";var EMAindicator=H.seriesTypes.ema,requiredIndicator=requiredIndicatorMixin,correctFloat=H.correctFloat;H.seriesType("dema","ema",{},{init:function(){var r=arguments,t=this;requiredIndicator.isParentLoaded(EMAindicator,"ema",t.type,function(i){i.prototype.init.apply(t,r)})},getEMA:function(r,t,i,e,a,o){return EMAindicator.prototype.calculateEma(o||[],r,void 0===a?1:a,this.chart.series[0].EMApercent,t,void 0===e?-1:e,i)},getValues:function(r,t){var i,e,a,o,n,s=t.period,c=2*s,d=r.xData,p=r.yData,u=p?p.length:0,l=-1,m=0,y=0,A=[],M=[],h=[],E=0,f=[];if(r.EMApercent=2/(s+1),u<2*s-1)return!1;for(isArray(p[0])&&(l=t.index?t.index:0),y=(m=EMAindicator.prototype.accumulatePeriodPoints(s,l,p))/s,m=0,o=s;o<u+2;o++)o<u+1&&(E=this.getEMA(p,e,y,l,o)[1],f.push(E)),e=E,o<c?m+=E:(o===c&&(y=m/s),E=f[o-s-1],i=this.getEMA([E],a,y)[1],n=[d[o-2],correctFloat(2*E-i)],A.push(n),M.push(n[0]),h.push(n[1]),a=i);return{values:A,xData:M,yData:h}}});