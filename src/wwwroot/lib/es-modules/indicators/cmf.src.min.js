"use strict";import H from"../parts/Globals.js";H.seriesType("cmf","sma",{params:{period:14,volumeSeriesID:"volume"}},{nameBase:"Chaikin Money Flow",isValid:function(){var e=this.chart,t=this.options,a=this.linkedParent,s=this.volumeSeries||(this.volumeSeries=e.get(t.params.volumeSeriesID)),i=a&&a.yData&&4===a.yData[0].length;function l(e){return e.xData&&e.xData.length>=t.params.period}return!!(a&&s&&l(a)&&l(s)&&i)},getValues:function(e,t){return!!this.isValid()&&this.getMoneyFlow(e.xData,e.yData,this.volumeSeries.yData,t.period)},getMoneyFlow:function(e,t,a,s){var i,l,n=t.length,r=[],u=0,o=0,h=[],p=[],m=[],D=-1;function f(e,t){var a,s,l,n=e[1],r=e[2],u=e[3];return null!==t&&null!==n&&null!==r&&null!==u&&n!==r?((l=u)-(s=r)-((a=n)-l))/(a-s)*t:(D=i,null)}if(s>0&&s<=n){for(i=0;i<s;i++)r[i]=f(t[i],a[i]),u+=a[i],o+=r[i];for(h.push(e[i-1]),p.push(i-D>=s&&0!==u?o/u:null),m.push([h[0],p[0]]);i<n;i++)r[i]=f(t[i],a[i]),u-=a[i-s],u+=a[i],o-=r[i-s],o+=r[i],l=[e[i],i-D>=s?o/u:null],h.push(l[0]),p.push(l[1]),m.push([l[0],l[1]])}return{values:m,xData:h,yData:p}}});