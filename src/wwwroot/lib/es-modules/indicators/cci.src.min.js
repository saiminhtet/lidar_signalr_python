"use strict";import H from"../parts/Globals.js";import U from"../parts/Utilities.js";var isArray=U.isArray,seriesType=H.seriesType;function sumArray(r){return r.reduce(function(r,e){return r+e},0)}function meanDeviation(r,e){var a,s=r.length,t=0;for(a=0;a<s;a++)t+=Math.abs(e-r[a]);return t}seriesType("cci","sma",{params:{period:14}},{getValues:function(r,e){var a,s,t,i,n,u,o=e.period,p=r.xData,f=r.yData,h=f?f.length:0,l=[],m=[],y=1,c=[],v=[],D=[];if(p.length<=o||!isArray(f[0])||4!==f[0].length)return!1;for(;y<o;)s=f[y-1],l.push((s[1]+s[2]+s[3])/3),y++;for(u=o;u<=h;u++)n=((s=f[u-1])[1]+s[2]+s[3])/3,t=l.push(n),a=(n-(i=sumArray(m=l.slice(t-o))/o))/(.015*(meanDeviation(m,i)/o)),c.push([p[u-1],a]),v.push(p[u-1]),D.push(a);return{values:c,xData:v,yData:D}}});