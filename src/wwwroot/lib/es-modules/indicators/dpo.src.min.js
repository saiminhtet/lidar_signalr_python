"use strict";import H from"../parts/Globals.js";import U from"../parts/Utilities.js";var pick=U.pick,correctFloat=H.correctFloat;function accumulatePoints(t,a,r,e,o){var s=pick(a[r][e],a[r]);return correctFloat(o?t-s:t+s)}H.seriesType("dpo","sma",{params:{period:21}},{nameBase:"DPO",getValues:function(t,a){var r,e,o,s,c=a.period,i=a.index,u=c+Math.floor(c/2+1),p=t.xData||[],l=t.yData||[],n=l.length,m=[],f=[],h=[],D=0;if(p.length<=u)return!1;for(o=0;o<c-1;o++)D=accumulatePoints(D,l,o,i);for(s=0;s<=n-u;s++)e=s+u-1,D=accumulatePoints(D,l,s+c-1,i),r=pick(l[e][i],l[e])-D/c,D=accumulatePoints(D,l,s,i,!0),m.push([p[e],r]),f.push(p[e]),h.push(r);return{values:m,xData:f,yData:h}}});