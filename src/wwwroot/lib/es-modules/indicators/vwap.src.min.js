"use strict";import H from"../parts/Globals.js";import U from"../parts/Utilities.js";var isArray=U.isArray,seriesType=H.seriesType;seriesType("vwap","sma",{params:{period:30,volumeSeriesID:"volume"}},{getValues:function(e,r){var a,s=e.chart,t=e.xData,i=e.yData,u=r.period,l=!0;return(a=s.get(r.volumeSeriesID))?(isArray(i[0])||(l=!1),this.calculateVWAPValues(l,t,i,a,u)):H.error("Series "+r.volumeSeriesID+" not found! Check `volumeSeriesID`.",!0,s)},calculateVWAPValues:function(e,r,a,s,t){var i,u,l,o,p,m,h=s.yData,n=s.xData.length,v=r.length,D=[],c=[],y=[],f=[],A=[];for(i=v<=n?v:n,p=0,m=0;p<i;p++)u=e?(a[p][1]+a[p][2]+a[p][3])/3:a[p],u*=h[p],l=m?D[p-1]+u:u,o=m?c[p-1]+h[p]:h[p],D.push(l),c.push(o),A.push([r[p],l/o]),y.push(A[p][0]),f.push(A[p][1]),++m===t&&(m=0);return{values:A,xData:y,yData:f}}});