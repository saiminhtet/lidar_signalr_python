"use strict";import H from"../parts/Globals.js";import U from"../parts/Utilities.js";var isArray=U.isArray;import requiredIndicatorMixin from"../mixins/indicator-required.js";var EMAindicator=H.seriesTypes.ema,requiredIndicator=requiredIndicatorMixin,correctFloat=H.correctFloat;H.seriesType("tema","ema",{},{init:function(){var e=arguments,t=this;requiredIndicator.isParentLoaded(EMAindicator,"ema",t.type,function(r){r.prototype.init.apply(t,e)})},getEMA:function(e,t,r,i,l,a){return EMAindicator.prototype.calculateEma(a||[],e,void 0===l?1:l,this.chart.series[0].EMApercent,t,void 0===i?-1:i,r)},getTemaPoint:function(e,t,r,i){return[e[i-3],correctFloat(3*r.level1-3*r.level2+r.level3)]},getValues:function(e,t){var r,i,l,a,o=t.period,n=2*o,s=3*o,v=e.xData,c=e.yData,p=c?c.length:0,u=-1,d=0,h=0,m=[],A=[],M=[],y=[],E=[],f={};if(e.EMApercent=2/(o+1),p<3*o-2)return!1;for(isArray(c[0])&&(u=t.index?t.index:0),h=(d=EMAindicator.prototype.accumulatePeriodPoints(o,u,c))/o,d=0,l=o;l<p+3;l++)l<p+1&&(f.level1=this.getEMA(c,r,h,u,l)[1],y.push(f.level1)),r=f.level1,l<n?d+=f.level1:(l===n&&(h=d/o,d=0),f.level1=y[l-o-1],f.level2=this.getEMA([f.level1],i,h)[1],E.push(f.level2),i=f.level2,l<s?d+=f.level2:(l===s&&(h=d/o),l===p+1&&(f.level1=y[l-o-1],f.level2=this.getEMA([f.level1],i,h)[1],E.push(f.level2)),f.level1=y[l-o-2],f.level2=E[l-2*o-1],f.level3=this.getEMA([f.level2],f.prevLevel3,h)[1],(a=this.getTemaPoint(v,s,f,l))&&(m.push(a),A.push(a[0]),M.push(a[1])),f.prevLevel3=f.level3));return{values:m,xData:A,yData:M}}});