"use strict";import H from"../parts/Globals.js";import U from"../parts/Utilities.js";var pick=U.pick,seriesType=H.seriesType,seriesTypes=H.seriesTypes,colProto=seriesTypes.column.prototype;seriesType("columnpyramid","column",{},{translate:function(){var t=this,e=t.chart,i=t.options,o=t.dense=t.closestPointRange*t.xAxis.transA<2,s=t.borderWidth=pick(i.borderWidth,o?0:1),p=t.yAxis,r=i.threshold,a=t.translatedThreshold=p.getThreshold(r),n=pick(i.minPointLength,5),l=t.getColumnMetrics(),h=l.width,d=t.barW=Math.max(h,1+2*s),c=t.pointXOffset=l.offset;e.inverted&&(a-=.5),i.pointPadding&&(d=Math.ceil(d)),colProto.translate.apply(t),t.points.forEach(function(o){var s,l,y,m,f,g,x,T,M,u,P,b,k=pick(o.yBottom,a),v=999+Math.abs(k),W=Math.min(Math.max(-v,o.plotY),p.len+v),A=o.plotX+c,H=d/2,L=Math.min(W,k),U=Math.max(W,k)-L;o.barX=A,o.pointWidth=h,o.tooltipPos=e.inverted?[p.len+p.pos-e.plotLeft-W,t.xAxis.len-A-H,U]:[A+H,W+p.pos-e.plotTop,U],s=r+(o.total||o.y),"percent"===i.stacking&&(s=r+(o.y<0)?-100:100),x=A-(m=H*(L-(y=p.toPixels(s,!0)))/(l=e.plotHeight-y-(e.plotHeight-a)))+H,T=A+m+H,M=A+(f=H*(L+U-y)/l)+H,u=A-f+H,P=L-n,b=L+U,o.y<0&&(P=L,b=L+U+n),e.inverted&&(T=(x=A+H+(m=H*(y-(g=e.plotWidth-L))/(l=y-(e.plotWidth-a))))-2*m,M=A-(f=H*(y-(g-U))/l)+H,u=A+f+H,P=L,b=L+U-n,o.y<0&&(b=L+U+n)),o.shapeType="path",o.shapeArgs={x:x,y:P,width:T-x,height:U,d:["M",x,P,"L",T,P,M,b,u,b,"Z"]}})}});