"use strict";import H from"../parts/Globals.js";import U from"../parts/Utilities.js";var defined=U.defined,extend=U.extend,isArray=U.isArray,isNumber=U.isNumber,pick=U.pick;import"../parts/Options.js";import"../parts/Series.js";var noop=H.noop,Series=H.Series,seriesType=H.seriesType,seriesTypes=H.seriesTypes,seriesProto=Series.prototype,pointProto=H.Point.prototype;seriesType("arearange","area",{lineWidth:1,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">‚óè</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0,dataLabels:{align:null,verticalAlign:null,xLow:0,xHigh:0,yLow:0,yHigh:0}},{pointArrayMap:["low","high"],pointValKey:"low",deferTranslatePolar:!0,toYData:function(t){return[t.low,t.high]},highToXY:function(t){var i=this.chart,o=this.xAxis.postTranslate(t.rectPlotX,this.yAxis.len-t.plotHigh);t.plotHighX=o.x-i.plotLeft,t.plotHigh=o.y-i.plotTop,t.plotLowX=t.plotX},translate:function(){var t=this,i=t.yAxis,o=!!t.modifyValue;seriesTypes.area.prototype.translate.apply(t),t.points.forEach(function(e){var a=e.high,s=e.plotY;e.isNull?e.plotY=null:(e.plotLow=s,e.plotHigh=i.translate(o?t.modifyValue(a,e):a,0,1,0,1),o&&(e.yBottom=e.plotHigh))}),this.chart.polar&&this.points.forEach(function(i){t.highToXY(i),i.tooltipPos=[(i.plotHighX+i.plotLowX)/2,(i.plotHigh+i.plotLow)/2]})},getGraphPath:function(t){var i,o,e,a,s,l,p,r=[],h=[],n=seriesTypes.area.prototype.getGraphPath,c=this.options,g=this.chart.polar&&!1!==c.connectEnds,d=c.connectNulls,y=c.step;for(i=(t=t||this.points).length,i=t.length;i--;)(o=t[i]).isNull||g||d||t[i+1]&&!t[i+1].isNull||h.push({plotX:o.plotX,plotY:o.plotY,doCurve:!1}),e={polarPlotY:o.polarPlotY,rectPlotX:o.rectPlotX,yBottom:o.yBottom,plotX:pick(o.plotHighX,o.plotX),plotY:o.plotHigh,isNull:o.isNull},h.push(e),r.push(e),o.isNull||g||d||t[i-1]&&!t[i-1].isNull||h.push({plotX:o.plotX,plotY:o.plotY,doCurve:!1});return s=n.call(this,t),y&&(!0===y&&(y="left"),c.step={left:"right",center:"center",right:"left"}[y]),l=n.call(this,r),p=n.call(this,h),c.step=y,a=[].concat(s,l),this.chart.polar||"M"!==p[0]||(p[0]="L"),this.graphPath=a,this.areaPath=s.concat(p),a.isArea=!0,a.xMap=s.xMap,this.areaPath.xMap=s.xMap,a},drawDataLabels:function(){var t,i,o,e,a,s=this.points,l=s.length,p=[],r=this.options.dataLabels,h=this.chart.inverted;if(isArray(r)?r.length>1?(e=r[0],a=r[1]):(e=r[0],a={enabled:!1}):((e=extend({},r)).x=r.xHigh,e.y=r.yHigh,(a=extend({},r)).x=r.xLow,a.y=r.yLow),e.enabled||this._hasPointLabels){for(t=l;t--;)(i=s[t])&&(o=e.inside?i.plotHigh<i.plotLow:i.plotHigh>i.plotLow,i.y=i.high,i._plotY=i.plotY,i.plotY=i.plotHigh,p[t]=i.dataLabel,i.dataLabel=i.dataLabelUpper,i.below=o,h?e.align||(e.align=o?"right":"left"):e.verticalAlign||(e.verticalAlign=o?"top":"bottom"));for(this.options.dataLabels=e,seriesProto.drawDataLabels&&seriesProto.drawDataLabels.apply(this,arguments),t=l;t--;)(i=s[t])&&(i.dataLabelUpper=i.dataLabel,i.dataLabel=p[t],delete i.dataLabels,i.y=i.low,i.plotY=i._plotY)}if(a.enabled||this._hasPointLabels){for(t=l;t--;)(i=s[t])&&(o=a.inside?i.plotHigh<i.plotLow:i.plotHigh>i.plotLow,i.below=!o,h?a.align||(a.align=o?"left":"right"):a.verticalAlign||(a.verticalAlign=o?"bottom":"top"));this.options.dataLabels=a,seriesProto.drawDataLabels&&seriesProto.drawDataLabels.apply(this,arguments)}if(e.enabled)for(t=l;t--;)(i=s[t])&&(i.dataLabels=[i.dataLabelUpper,i.dataLabel].filter(function(t){return!!t}));this.options.dataLabels=r},alignDataLabel:function(){seriesTypes.column.prototype.alignDataLabel.apply(this,arguments)},drawPoints:function(){var t,i,o=this.points.length;for(seriesProto.drawPoints.apply(this,arguments),i=0;i<o;)(t=this.points[i]).origProps={plotY:t.plotY,plotX:t.plotX,isInside:t.isInside,negative:t.negative,zone:t.zone,y:t.y},t.lowerGraphic=t.graphic,t.graphic=t.upperGraphic,t.plotY=t.plotHigh,defined(t.plotHighX)&&(t.plotX=t.plotHighX),t.y=t.high,t.negative=t.high<(this.options.threshold||0),t.zone=this.zones.length&&t.getZone(),this.chart.polar||(t.isInside=t.isTopInside=void 0!==t.plotY&&t.plotY>=0&&t.plotY<=this.yAxis.len&&t.plotX>=0&&t.plotX<=this.xAxis.len),i++;for(seriesProto.drawPoints.apply(this,arguments),i=0;i<o;)(t=this.points[i]).upperGraphic=t.graphic,t.graphic=t.lowerGraphic,extend(t,t.origProps),delete t.origProps,i++},setStackedPoints:noop},{setState:function(){var t=this.state,i=this.series,o=i.chart.polar;defined(this.plotHigh)||(this.plotHigh=i.yAxis.toPixels(this.high,!0)),defined(this.plotLow)||(this.plotLow=this.plotY=i.yAxis.toPixels(this.low,!0)),i.stateMarkerGraphic&&(i.lowerStateMarkerGraphic=i.stateMarkerGraphic,i.stateMarkerGraphic=i.upperStateMarkerGraphic),this.graphic=this.upperGraphic,this.plotY=this.plotHigh,o&&(this.plotX=this.plotHighX),pointProto.setState.apply(this,arguments),this.state=t,this.plotY=this.plotLow,this.graphic=this.lowerGraphic,o&&(this.plotX=this.plotLowX),i.stateMarkerGraphic&&(i.upperStateMarkerGraphic=i.stateMarkerGraphic,i.stateMarkerGraphic=i.lowerStateMarkerGraphic,i.lowerStateMarkerGraphic=void 0),pointProto.setState.apply(this,arguments)},haloPath:function(){var t=this.series.chart.polar,i=[];return this.plotY=this.plotLow,t&&(this.plotX=this.plotLowX),this.isInside&&(i=pointProto.haloPath.apply(this,arguments)),this.plotY=this.plotHigh,t&&(this.plotX=this.plotHighX),this.isTopInside&&(i=i.concat(pointProto.haloPath.apply(this,arguments))),i},destroyElements:function(){return["lowerGraphic","upperGraphic"].forEach(function(t){this[t]&&(this[t]=this[t].destroy())},this),this.graphic=null,pointProto.destroyElements.apply(this,arguments)},isValid:function(){return isNumber(this.low)&&isNumber(this.high)}});