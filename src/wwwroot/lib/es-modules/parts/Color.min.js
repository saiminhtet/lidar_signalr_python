"use strict";import H from"./Globals.js";import U from"./Utilities.js";var isNumber=U.isNumber,pInt=U.pInt,merge=H.merge;H.Color=function(t){if(!(this instanceof H.Color))return new H.Color(t);this.init(t)},H.Color.prototype={parsers:[{regex:/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,parse:function(t){return[pInt(t[1]),pInt(t[2]),pInt(t[3]),parseFloat(t[4],10)]}},{regex:/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,parse:function(t){return[pInt(t[1]),pInt(t[2]),pInt(t[3]),1]}}],names:{white:"#ffffff",black:"#000000"},init:function(t){var s,r,n,e,o;if(this.input=t=this.names[t&&t.toLowerCase?t.toLowerCase():""]||t,t&&t.stops)this.stops=t.stops.map(function(t){return new H.Color(t[1])});else if(t&&t.charAt&&"#"===t.charAt()&&(o=t.length,t=parseInt(t.substr(1),16),7===o?r=[(16711680&t)>>16,(65280&t)>>8,255&t,1]:4===o&&(r=[(3840&t)>>4|(3840&t)>>8,(240&t)>>4|240&t,(15&t)<<4|15&t,1])),!r)for(n=this.parsers.length;n--&&!r;)(s=(e=this.parsers[n]).regex.exec(t))&&(r=e.parse(s));this.rgba=r||[]},get:function(t){var s,r=this.input,n=this.rgba;return this.stops?((s=merge(r)).stops=[].concat(s.stops),this.stops.forEach(function(r,n){s.stops[n]=[s.stops[n][0],r.get(t)]})):s=n&&isNumber(n[0])?"rgb"===t||!t&&1===n[3]?"rgb("+n[0]+","+n[1]+","+n[2]+")":"a"===t?n[3]:"rgba("+n.join(",")+")":r,s},brighten:function(t){var s,r=this.rgba;if(this.stops)this.stops.forEach(function(s){s.brighten(t)});else if(isNumber(t)&&0!==t)for(s=0;s<3;s++)r[s]+=pInt(255*t),r[s]<0&&(r[s]=0),r[s]>255&&(r[s]=255);return this},setOpacity:function(t){return this.rgba[3]=t,this},tweenTo:function(t,s){var r,n=this.rgba,e=t.rgba;return e.length&&n&&n.length?((r=1!==e[3]||1!==n[3])?"rgba(":"rgb(")+Math.round(e[0]+(n[0]-e[0])*(1-s))+","+Math.round(e[1]+(n[1]-e[1])*(1-s))+","+Math.round(e[2]+(n[2]-e[2])*(1-s))+(r?","+(e[3]+(n[3]-e[3])*(1-s)):"")+")":t.input||"none"}},H.color=function(t){return new H.Color(t)};