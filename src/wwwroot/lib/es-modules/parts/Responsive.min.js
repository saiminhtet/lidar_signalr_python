"use strict";import H from"./Globals.js";import"./Chart.js";import U from"./Utilities.js";var isArray=U.isArray,isObject=U.isObject,objectEach=U.objectEach,pick=U.pick,splat=U.splat,Chart=H.Chart;Chart.prototype.setResponsive=function(t,i){var s,e,r=this.options.responsive,n=[],o=this.currentResponsive;!i&&r&&r.rules&&r.rules.forEach(function(t){void 0===t._id&&(t._id=H.uniqueKey()),this.matchResponsiveRule(t,n)},this);var c=H.merge.apply(0,n.map(function(t){return H.find(r.rules,function(i){return i._id===t}).chartOptions}));c.isResponsiveOptions=!0,n=n.toString()||void 0,s=o&&o.ruleIds,n!==s&&(o&&this.update(o.undoOptions,t,!0),n?((e=this.currentOptions(c)).isResponsiveOptions=!0,this.currentResponsive={ruleIds:n,mergedOptions:c,undoOptions:e},this.update(c,t,!0)):this.currentResponsive=void 0)},Chart.prototype.matchResponsiveRule=function(t,i){var s=t.condition;(s.callback||function(){return this.chartWidth<=pick(s.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=pick(s.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=pick(s.minWidth,0)&&this.chartHeight>=pick(s.minHeight,0)}).call(this)&&i.push(t._id)},Chart.prototype.currentOptions=function(t){var i=this,s={};return function t(s,e,r,n){var o;objectEach(s,function(s,c){if(!n&&i.collectionsWithUpdate.indexOf(c)>-1)for(s=splat(s),r[c]=[],o=0;o<s.length;o++)e[c][o]&&(r[c][o]={},t(s[o],e[c][o],r[c][o],n+1));else isObject(s)?(r[c]=isArray(s)?[]:{},t(s,e[c]||{},r[c],n+1)):void 0===e[c]?r[c]=null:r[c]=e[c]})}(t,this.options,s,0),s};