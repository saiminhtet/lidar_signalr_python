"use strict";import Highcharts from"../../parts/Globals.js";import U from"../../parts/Utilities.js";var extend=U.extend,pick=U.pick,win=Highcharts.win,doc=win.document,merge=Highcharts.merge,addEvent=Highcharts.addEvent,functionsToOverrideByDerivedClasses={init:function(){},getKeyboardNavigation:function(){},onChartUpdate:function(){},onChartRender:function(){},destroy:function(){}};function AccessibilityComponent(){}AccessibilityComponent.prototype={initBase:function(e){this.chart=e,this.eventRemovers=[],this.domElements=[],this.keyCodes={left:37,right:39,up:38,down:40,enter:13,space:32,esc:27,tab:9},this.hiddenStyle={position:"absolute",width:"1px",height:"1px",overflow:"hidden"}},addEvent:function(){var e=Highcharts.addEvent.apply(Highcharts,arguments);return this.eventRemovers.push(e),e},createElement:function(){var e=Highcharts.win.document.createElement.apply(Highcharts.win.document,arguments);return this.domElements.push(e),e},fakeClickEvent:function(e){if(e&&e.onclick&&doc.createEvent){var t=doc.createEvent("Event");t.initEvent("click",!0,!1),e.onclick(t)}},addProxyGroup:function(e){this.createOrUpdateProxyContainer();var t=this.createElement("div");return Object.keys(e||{}).forEach(function(n){null!==e[n]&&t.setAttribute(n,e[n])}),this.chart.a11yProxyContainer.appendChild(t),t},createOrUpdateProxyContainer:function(){var e=this.chart,t=e.renderer.box;e.a11yProxyContainer=e.a11yProxyContainer||this.createProxyContainerElement(),t.nextSibling!==e.a11yProxyContainer&&e.container.insertBefore(e.a11yProxyContainer,t.nextSibling)},createProxyContainerElement:function(){var e=doc.createElement("div");return e.className="highcharts-a11y-proxy-container",e},createProxyButton:function(e,t,n,i,r){var o=e.element,a=this.createElement("button"),c=merge({"aria-label":o.getAttribute("aria-label")},n),s=this.getElementPosition(i||e);return Object.keys(c).forEach(function(e){null!==c[e]&&a.setAttribute(e,c[e])}),a.className="highcharts-a11y-proxy-button",r&&addEvent(a,"click",r),this.setProxyButtonStyle(a,s),this.proxyMouseEventsForButton(o,a),t.appendChild(a),c["aria-hidden"]||this.unhideElementFromScreenReaders(a),a},getElementPosition:function(e){var t=e.element,n=this.chart.renderTo;if(n&&t&&t.getBoundingClientRect){var i=t.getBoundingClientRect(),r=n.getBoundingClientRect();return{x:i.left-r.left,y:i.top-r.top,width:i.right-i.left,height:i.bottom-i.top}}return{x:0,y:0,width:1,height:1}},setProxyButtonStyle:function(e,t){merge(!0,e.style,{"border-width":0,"background-color":"transparent",cursor:"pointer",outline:"none",opacity:.001,filter:"alpha(opacity=1)","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)",zIndex:999,overflow:"hidden",padding:0,margin:0,display:"block",position:"absolute",width:(t.width||1)+"px",height:(t.height||1)+"px",left:pick(t.x,t.left)+"px",top:pick(t.y,t.top)+"px"})},proxyMouseEventsForButton:function(e,t){var n=this;["click","mouseover","mouseenter","mouseleave","mouseout"].forEach(function(i){addEvent(t,i,function(t){var r=n.cloneMouseEvent(t);e&&(r?e.fireEvent?e.fireEvent(r):e.dispatchEvent&&e.dispatchEvent(r):e["on"+i]&&e["on"+i](t)),t.stopPropagation(),t.preventDefault()})})},cloneMouseEvent:function(e){if("function"==typeof win.MouseEvent)return new win.MouseEvent(e.type,e);if(doc.createEvent){var t=doc.createEvent("MouseEvent");if(t.initMouseEvent)return t.initMouseEvent(e.type,"click"===e.type||e.canBubble,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),t;if((t=doc.createEvent("Event")).initEvent)return t.initEvent(e.type,!0,!0),t}},removeElement:function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},unhideElementFromScreenReaders:function(e){e.setAttribute("aria-hidden",!1),e!==this.chart.renderTo&&e.parentNode&&(Array.prototype.forEach.call(e.parentNode.childNodes,function(e){e.hasAttribute("aria-hidden")||e.setAttribute("aria-hidden",!0)}),this.unhideElementFromScreenReaders(e.parentNode))},destroyBase:function(){var e=this.chart||{},t=this;this.removeElement(e.a11yProxyContainer),this.eventRemovers.forEach(function(e){e()}),this.domElements.forEach(function(e){t.removeElement(e)}),this.eventRemovers=[],this.domElements=[]}},extend(AccessibilityComponent.prototype,functionsToOverrideByDerivedClasses);export default AccessibilityComponent;