import H from"../parts/Globals.js";import U from"../parts/Utilities.js";var defined=U.defined,extend=U.extend;import"../parts/Axis.js";import"../parts/Series.js";function MockPoint(t,i,s){this.series={visible:!0,chart:t,getPlotBox:H.Series.prototype.getPlotBox},this.target=i||null,this.options=s,this.applyOptions(this.getOptions())}MockPoint.fromPoint=function(t){return new MockPoint(t.series.chart,null,{x:t.x,y:t.y,xAxis:t.series.xAxis,yAxis:t.series.yAxis})},MockPoint.pointToPixels=function(t,i){var s,o=t.series,e=o.chart,n=t.plotX,h=t.plotY;return e.inverted&&(t.mock?(n=t.plotY,h=t.plotX):(n=e.plotWidth-t.plotY,h=e.plotHeight-t.plotX)),o&&!i&&(n+=(s=o.getPlotBox()).translateX,h+=s.translateY),{x:n,y:h}},MockPoint.pointToOptions=function(t){return{x:t.x,y:t.y,xAxis:t.series.xAxis,yAxis:t.series.yAxis}},extend(MockPoint.prototype,{mock:!0,hasDynamicOptions:function(){return"function"==typeof this.options},getOptions:function(){return this.hasDynamicOptions()?this.options(this.target):this.options},applyOptions:function(t){this.command=t.command,this.setAxis(t,"x"),this.setAxis(t,"y"),this.refresh()},setAxis:function(t,i){var s=i+"Axis",o=t[s],e=this.series.chart;this.series[s]=o instanceof H.Axis?o:defined(o)?e[s][o]||e.get(o):null},toAnchor:function(){var t=[this.plotX,this.plotY,0,0];return this.series.chart.inverted&&(t[0]=this.plotY,t[1]=this.plotX),t},getLabelConfig:function(){return{x:this.x,y:this.y,point:this}},isInsidePane:function(){var t=this.plotX,i=this.plotY,s=this.series.xAxis,o=this.series.yAxis,e=!0;return s&&(e=defined(t)&&t>=0&&t<=s.len),o&&(e=e&&defined(i)&&i>=0&&i<=o.len),e},refresh:function(){var t=this.series,i=t.xAxis,s=t.yAxis,o=this.getOptions();i?(this.x=o.x,this.plotX=i.toPixels(o.x,!0)):(this.x=null,this.plotX=o.x),s?(this.y=o.y,this.plotY=s.toPixels(o.y,!0)):(this.y=null,this.plotY=o.y),this.isInside=this.isInsidePane()},translate:function(t,i,s,o){this.hasDynamicOptions()||(this.plotX+=s,this.plotY+=o,this.refreshOptions())},scale:function(t,i,s,o){if(!this.hasDynamicOptions()){var e=this.plotX*s,n=this.plotY*o,h=(1-s)*t,r=(1-o)*i;this.plotX=h+e,this.plotY=r+n,this.refreshOptions()}},rotate:function(t,i,s){if(!this.hasDynamicOptions()){var o,e,n=Math.cos(s),h=Math.sin(s),r=this.plotX,p=this.plotY;o=(r-=t)*n-(p-=i)*h,e=r*h+p*n,this.plotX=o+t,this.plotY=e+i,this.refreshOptions()}},refreshOptions:function(){var t=this.series,i=t.xAxis,s=t.yAxis;this.x=this.options.x=i?this.options.x=i.toValue(this.plotX,!0):this.plotX,this.y=this.options.y=s?s.toValue(this.plotY,!0):this.plotY}});export default MockPoint;