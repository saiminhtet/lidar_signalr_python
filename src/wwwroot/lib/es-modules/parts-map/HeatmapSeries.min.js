"use strict";import H from"../parts/Globals.js";import U from"../parts/Utilities.js";var extend=U.extend,pick=U.pick;import"../parts/Options.js";import"../parts/Point.js";import"../parts/Series.js";import"../parts/Legend.js";import"./ColorMapSeriesMixin.js";var colorMapPointMixin=H.colorMapPointMixin,colorMapSeriesMixin=H.colorMapSeriesMixin,LegendSymbolMixin=H.LegendSymbolMixin,merge=H.merge,noop=H.noop,fireEvent=H.fireEvent,Series=H.Series,seriesType=H.seriesType,seriesTypes=H.seriesTypes;seriesType("heatmap","scatter",{animation:!1,borderWidth:0,nullColor:"#f7f7f7",dataLabels:{formatter:function(){return this.point.value},inside:!0,verticalAlign:"middle",crop:!1,overflow:!1,padding:0},marker:null,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{hover:{halo:!1,brightness:.2}}},merge(colorMapSeriesMixin,{pointArrayMap:["y","value"],hasPointSpecificOptions:!0,getExtremesFromAll:!0,directTouch:!0,init:function(){var t;seriesTypes.scatter.prototype.init.apply(this,arguments),(t=this.options).pointRange=pick(t.pointRange,t.colsize||1),this.yAxis.axisPointRange=t.rowsize||1},translate:function(){var t=this.options,e=this.xAxis,i=this.yAxis,n=t.pointPadding||0,a=function(t,e,i){return Math.min(Math.max(e,t),i)},o=this.pointPlacementToXValue();this.generatePoints(),this.points.forEach(function(s){var r=(t.colsize||1)/2,p=(t.rowsize||1)/2,l=a(Math.round(e.len-e.translate(s.x-r,0,1,0,1,-o)),-e.len,2*e.len),h=a(Math.round(e.len-e.translate(s.x+r,0,1,0,1,-o)),-e.len,2*e.len),c=a(Math.round(i.translate(s.y-p,0,1,0,1)),-i.len,2*i.len),d=a(Math.round(i.translate(s.y+p,0,1,0,1)),-i.len,2*i.len),m=pick(s.pointPadding,n);s.plotX=s.clientX=(l+h)/2,s.plotY=(c+d)/2,s.shapeType="rect",s.shapeArgs={x:Math.min(l,h)+m,y:Math.min(c,d)+m,width:Math.max(Math.abs(h-l)-2*m,0),height:Math.max(Math.abs(d-c)-2*m,0)}}),fireEvent(this,"afterTranslate")},drawPoints:function(){var t=this.chart.styledMode?"css":"animate";seriesTypes.column.prototype.drawPoints.call(this),this.points.forEach(function(e){e.graphic[t](this.colorAttribs(e))},this)},hasData:function(){return!!this.processedXData.length},getValidPoints:function(t,e){return Series.prototype.getValidPoints.call(this,t,e,!0)},animate:noop,getBox:noop,drawLegendSymbol:LegendSymbolMixin.drawRectangle,alignDataLabel:seriesTypes.column.prototype.alignDataLabel,getExtremes:function(){Series.prototype.getExtremes.call(this,this.valueData),this.valueMin=this.dataMin,this.valueMax=this.dataMax,Series.prototype.getExtremes.call(this)}}),extend({haloPath:function(t){if(!t)return[];var e=this.shapeArgs;return["M",e.x-t,e.y-t,"L",e.x-t,e.y+e.height+t,e.x+e.width+t,e.y+e.height+t,e.x+e.width+t,e.y-t,"Z"]}},colorMapPointMixin));